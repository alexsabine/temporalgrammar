<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRR Framework: Mathematical Foundations</title>
    
    <script>
    MathJax = {
        tex: {
            inlineMath: [['$', '$']],
            displayMath: [['$$', '$$']],
            processEscapes: true,
            processEnvironments: true,
            tags: 'ams'
        }
    };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, serif;
            line-height: 1.8;
            color: #1a1a1a;
            background: #f0f0f0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 0 30px rgba(0,0,0,0.1);
            min-height: 100vh;
        }
        
        .header-info {
            background: #1a1a1a;
            color: white;
            padding: 40px 60px;
            border-bottom: 3px solid #c9a227;
        }
        
        .header-info h1 {
            font-size: 2.4em;
            margin-bottom: 0.3em;
            font-weight: 400;
            letter-spacing: 1px;
            color: white;
        }
        
        .header-info p {
            font-size: 1.1em;
            color: #ccc;
            margin: 0.5em 0;
            font-style: italic;
        }
        
        .tabs {
            display: flex;
            background: #2a2a2a;
            position: sticky;
            top: 0;
            z-index: 1000;
            flex-wrap: wrap;
        }
        
        .tab-button {
            flex: 1;
            min-width: 120px;
            padding: 18px 16px;
            background: #2a2a2a;
            color: #ccc;
            border: none;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
            font-family: inherit;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .tab-button:hover { background: #3a3a3a; color: white; }
        .tab-button.active { background: #c9a227; color: #1a1a1a; font-weight: 600; }
        
        .tab-content { display: none; padding: 50px 60px; }
        .tab-content.active { display: block; }
        
        h2 {
            font-size: 1.6em;
            margin: 1.5em 0 0.8em;
            color: #1a1a1a;
            border-bottom: 2px solid #c9a227;
            padding-bottom: 0.3em;
            font-weight: 400;
        }
        h2:first-child { margin-top: 0; }
        h3 { font-size: 1.3em; margin: 1.2em 0 0.6em; color: #333; font-weight: 600; }
        p { margin-bottom: 1.2em; text-align: justify; }
        
        .definition, .theorem, .proposition, .remark, .assumption {
            background: #fafafa;
            border: 1px solid #ddd;
            padding: 20px 25px;
            margin: 1.5em 0;
        }
        .assumption { background: #fef8f0; border-color: #e0c090; }
        .theorem { background: #f0f5fa; border-color: #a0b8d0; }
        .proposition { background: #f0faf5; border-color: #90c0a0; }
        .remark { background: #f7fafc; border-color: #b0b8c0; }
        .warning-box { background: #fff8e6; border: 1px solid #e0c060; padding: 20px 25px; margin: 1.5em 0; }
        .success-box { background: #f0fef0; border: 1px solid #90c090; padding: 20px 25px; margin: 1.5em 0; }
        .layperson-box { background: #f8fbfe; border: 1px solid #b0c8e0; padding: 20px 25px; margin: 1.5em 0; }
        .env-title { font-weight: 600; margin-bottom: 0.5em; color: #1a1a1a; }
        .equation-box { background: #f8f8f8; border: 1px solid #ddd; padding: 20px; margin: 1.5em 0; text-align: center; border-radius: 4px; }
        
        table { width: 100%; border-collapse: collapse; margin: 1.5em 0; }
        th { background: #1a1a1a; color: white; padding: 12px 15px; text-align: left; font-weight: 400; }
        td { padding: 10px 15px; border-bottom: 1px solid #ddd; }
        tr:nth-child(even) { background: #f8f8f8; }
        
        ul, ol { margin-left: 2em; margin-bottom: 1.2em; }
        li { margin-bottom: 0.5em; }
        
        .sim-container { border: 2px solid #1a1a1a; padding: 20px; margin: 1.5em 0; background: #fafafa; }
        .omega-control, .precision-control { text-align: center; padding: 20px; border: 2px solid #c9a227; margin-bottom: 20px; background: white; }
        .omega-value, .precision-value { font-size: 2.2rem; font-weight: bold; }
        .omega-label, .precision-label { font-size: 0.85rem; color: #666; margin-bottom: 12px; }
        .omega-control input[type="range"], .precision-control input[type="range"] { width: 80%; max-width: 500px; margin: 10px 0; }
        .regime-label { font-size: 1rem; font-weight: bold; margin-top: 8px; padding: 8px 20px; display: inline-block; border-radius: 3px; }
        .regime-i { background: #d0e0f0; color: #1a4a7a; }
        .regime-crit { background: #d0f0d0; color: #1a6a1a; }
        .regime-e { background: #f0d0d0; color: #7a1a1a; }
        .sim-figures { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .sim-figure { border: 1px solid #ccc; padding: 12px; background: white; }
        .sim-figure-title { font-weight: bold; font-size: 0.9rem; margin-bottom: 8px; border-bottom: 1px solid #ddd; padding-bottom: 5px; }
        .sim-figure canvas { display: block; width: 100%; }
        .sim-figure-caption { font-size: 0.8rem; margin-top: 8px; color: #444; line-height: 1.4; }
        .state-box { border: 2px solid #1a1a1a; padding: 15px 20px; margin-bottom: 20px; min-height: 100px; background: white; }
        .state-box h4 { font-size: 1rem; margin-bottom: 8px; }
        .state-box p { font-size: 0.9rem; margin-bottom: 6px; text-align: left; }
        .state-box .mechanism { font-style: italic; color: #444; }
        .correspondence-table td:first-child { font-weight: 600; background: #f8f8f8; }
        .references { font-size: 0.95em; }
        .references p { margin-bottom: 0.8em; padding-left: 2em; text-indent: -2em; }
        
        @media (max-width: 768px) {
            .tab-content { padding: 30px 20px; }
            .header-info { padding: 20px; }
            .header-info h1 { font-size: 1.8em; }
            .tab-button { padding: 12px 8px; font-size: 11px; min-width: 80px; }
            .sim-figures { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-info">
            <h1>Coherence‚ÄìRupture‚ÄìRegeneration</h1>
            <p>Mathematical Foundations for Non-Markovian Dynamics with Threshold-Triggered Discontinuities</p>
            <p style="font-size: 0.95em; margin-top: 1.5em; opacity: 0.8;">A. Sabine ¬∑ Cohere Research ¬∑ Version 5.2 ¬∑ January 2026</p>
        </div>
        
        <div class="tabs">
            <button class="tab-button active" onclick="openTab(event, 'overview')">Overview</button>
            <button class="tab-button" onclick="openTab(event, 'foundations')">Foundations</button>
            <button class="tab-button" onclick="openTab(event, 'mechanism')">Regeneration</button>
            <button class="tab-button" onclick="openTab(event, 'ei')">E-I Criticality</button>
            <button class="tab-button" onclick="openTab(event, 'fep')">FEP Connection</button>
            <button class="tab-button" onclick="openTab(event, 'empirical')">Empirical</button>
        </div>

        <!-- OVERVIEW TAB -->
        <div id="overview" class="tab-content active">
            <h2>What is CRR? A Plain-Language Introduction</h2>
            
            <div class="layperson-box">
                <div class="env-title">üí° The Core Idea</div>
                <p>Imagine how your experience of the present moment works. You don't experience time as a smooth flow‚Äîyou experience distinct "nows," each one feeling complete before giving way to the next. William James called these "perchings" and "flights" of consciousness.</p>
                <p>CRR proposes that this pattern‚Äî<strong>build up, break, rebuild</strong>‚Äîis a universal signature of how complex systems navigate time.</p>
            </div>
            
            <h3>The Three Phases</h3>
            
            <div class="layperson-box">
                <div class="env-title">üí° Coherence: Building Up</div>
                <p>Think of coherence as "accumulating constraint." As you read this sentence, your brain is integrating information‚Äîwords build on words, meaning accumulates. Mathematically, coherence is like filling a bucket until it reaches capacity.</p>
            </div>
            
            <div class="layperson-box">
                <div class="env-title">üí° Rupture: The Breaking Point</div>
                <p>When the bucket is full, it tips over. This is rupture‚Äîthe discrete moment when accumulated coherence reaches threshold and the system must reorganise. <strong>The key insight:</strong> Rupture is when the "inside" finally matches the "outside." At this moment, you can <em>write</em> to memory‚Äîthis is the <strong>write window</strong>.</p>
            </div>
            
            <div class="layperson-box">
                <div class="env-title">üí° Regeneration: Selective Rebuilding</div>
                <p>After rupture, the system rebuilds using its history‚Äîbut not all history equally. Moments of high coherence contribute more; moments of low coherence fade away. This is why significant experiences shape you more than forgettable ones. High-coherence moments matter most, <em>regardless of when they occurred</em>.</p>
            </div>
            
            <h2>The Single Parameter: Œ©</h2>
            
            <div class="layperson-box">
                <div class="env-title">üí° One Dial, Many Effects</div>
                <p>The framework has one central parameter: <strong>Œ©</strong> (omega). Think of it as a dial between "rigid" and "flexible":</p>
                <ul>
                    <li><strong>Low Œ© (rigid):</strong> Frequent ruptures, tight patterns. Like an anxious mind.</li>
                    <li><strong>High Œ© (flexible):</strong> Rare ruptures, loose patterns. Like a dreaming mind.</li>
                    <li><strong>Œ© ‚âà 1 (critical):</strong> The sweet spot‚Äîmaximally sensitive and organised.</li>
                </ul>
            </div>
            
            <div class="success-box">
                <div class="env-title">Why Does This Matter?</div>
                <p>If CRR is correct, it provides: a unified language for dynamics across scales, testable predictions about timing and variability, a bridge between physics and psychology, and a formal account of what it <em>feels like</em> to be in time.</p>
            </div>
        </div>

        <!-- FOUNDATIONS TAB - SIMPLIFIED: No archival/active distinction -->
        <div id="foundations" class="tab-content">
            <h2>1. Standing Assumptions</h2>
            
            <div class="assumption">
                <div class="env-title">Assumption (A1) Regularity</div>
                <p>For each $x$ and $t$, the function $\tau \mapsto \mathcal{L}(x,\tau)$ is locally integrable on $[0,t]$.</p>
            </div>
            
            <div class="assumption">
                <div class="env-title">Assumption (A2) Non-negativity</div>
                <p>$\mathcal{L}(x,\tau) \geq 0$ for all $x, \tau$. History accumulates; it does not spontaneously dissipate.</p>
            </div>
            
            <div class="assumption">
                <div class="env-title">Assumption (A3) Bounded Rate (No-Zeno Condition)</div>
                <p>There exists $M > 0$ such that $\mathcal{L}(x,t) \leq M$ for all $x, t$. This ensures each coherence cycle has duration at least $\Omega/M$, preventing infinitely many ruptures in finite time.</p>
            </div>
            
            <h2>2. Core Definitions</h2>
            
            <div class="definition">
                <div class="env-title">Definition 1 (Mnemonic Entanglement Rate)</div>
                <p>The <em>mnemonic entanglement rate</em> is a function $\mathcal{L} : \mathcal{X} \times [0,T] \to \mathbb{R}_{\geq 0}$ that assigns to each state-time pair $(x,\tau)$ a rate of coherence accumulation.</p>
                <p><strong>Dimensions:</strong> $[\mathcal{L}] = [T^{-1}]$ (a rate, so that $\int \mathcal{L}\, d\tau$ is dimensionless).</p>
            </div>
            
            <div class="definition">
                <div class="env-title">Definition 2 (Coherence)</div>
                <p>Let $t_j$ denote the most recent rupture time before $t$ (with $t_0 = 0$). The <em>coherence</em> at state $x$ and time $t$ is the accumulated constraint since the last rupture:</p>
                <div class="equation-box">
                    $$C(x,t) := \int_{t_j}^t \mathcal{L}(x,\tau) \, d\tau$$
                </div>
                <p><strong>Properties:</strong> Dimensionless, monotone non-decreasing within each cycle, <strong>resets to 0 at each rupture</strong>.</p>
            </div>
            
            <div class="definition">
                <div class="env-title">Definition 3 (Threshold Parameter)</div>
                <p>The <em>threshold parameter</em> $\Omega > 0$ is a positive dimensionless constant characterising the system's capacity for coherence accumulation before structural change becomes necessary.</p>
            </div>
            
            <div class="definition">
                <div class="env-title">Definition 4 (Rupture)</div>
                <p>A <em>rupture</em> occurs at time $t_*$ when coherence reaches threshold:</p>
                <div class="equation-box">
                    $$t_* := \inf\{t > t_j : C(x,t) \geq \Omega\}$$
                </div>
                <p>The rupture event is represented by a Dirac delta $\delta(t - t_*)$. Following rupture: $C(x, t_*^+) = 0$.</p>
            </div>
            
            <div class="definition">
                <div class="env-title">Definition 5 (Regeneration)</div>
                <p>The <em>regeneration operator</em> reconstructs the system state by weighting historical field values $\Phi(x,\tau)$ by the coherence <em>at each historical moment</em>:</p>
                <div class="equation-box">
                    $$\mathcal{R}(x,t) := \frac{\displaystyle\int_0^t \Phi(x,\tau) \cdot e^{C(x,\tau)/\Omega} \, d\tau}{\displaystyle\int_0^t e^{C(x,\tau)/\Omega} \, d\tau}$$
                </div>
                <p>where $C(x,\tau)$ is the coherence value <em>at moment $\tau$</em>‚Äîhow far into its cycle the system was at that historical moment.</p>
            </div>
            
            <div class="success-box">
                <div class="env-title">Key Insight: High-Coherence Moments Are Weighted Equally Across Time</div>
                <p>The regeneration integral uses $C(x,\tau)$‚Äîthe coherence value at each historical moment‚Äînot a cumulative sum. Since $C$ cycles between $0$ and $\Omega$, moments just before rupture (when $C \approx \Omega$) have weight $\approx e$, regardless of <em>when</em> they occurred.</p>
                <p>This means a high-coherence moment from 1000 cycles ago contributes equally to regeneration as one from the last cycle. History is weighted by <em>significance</em> (coherence), not by <em>recency</em>. This is consonant with Bergson's insight that memory is "the continuous presence of history," not retrieval from storage.</p>
            </div>
            
            <h2>3. Key Properties</h2>
            
            <div class="theorem">
                <div class="env-title">Theorem (No Zeno Pathology)</div>
                <p>Under (A3), each coherence cycle has duration at least $\Omega/M$. Hence the number of ruptures in any finite interval $[0,T]$ is at most $\lfloor TM/\Omega \rfloor + 1 < \infty$.</p>
            </div>
            
            <div class="theorem">
                <div class="env-title">Theorem (Euler Calibration)</div>
                <p>At each rupture, $C(x,t_*) = \Omega$, so the rupture moment contributes with weight:</p>
                <div class="equation-box">
                    $$e^{C(x,t_*)/\Omega} = e^{\Omega/\Omega} = e \approx 2.718$$
                </div>
                <p>This is the maximum weight any moment can have, and it occurs at every rupture regardless of when it happened.</p>
            </div>
            
            <h2>4. Dimensional Analysis Summary</h2>
            
            <table>
                <tr><th>Quantity</th><th>Symbol</th><th>Dimensions</th></tr>
                <tr><td>Mnemonic rate</td><td>$\mathcal{L}$</td><td>$[T^{-1}]$</td></tr>
                <tr><td>Coherence</td><td>$C$</td><td>dimensionless</td></tr>
                <tr><td>Threshold</td><td>$\Omega$</td><td>dimensionless</td></tr>
                <tr><td>Historical field</td><td>$\Phi$</td><td>[F]</td></tr>
                <tr><td>Regeneration</td><td>$\mathcal{R}$</td><td>[F]</td></tr>
            </table>
        </div>

        <!-- REGENERATION MECHANISM TAB -->
        <div id="mechanism" class="tab-content">
            <h2>1. The Regeneration Mechanism</h2>
            
            <div class="layperson-box">
                <div class="env-title">üí° In Plain Language</div>
                <p>When a system regenerates after rupture, it doesn't treat all of history equally. Important moments (high coherence) contribute more; forgettable moments (low coherence) fade away.</p>
                <p>Crucially, this weighting is based on how coherent each moment was <em>in its own context</em>‚Äînot on how recent it was. A significant experience from years ago can shape you as much as one from yesterday, if both reached high coherence.</p>
            </div>
            
            <h3>1.1 Weight Function</h3>
            
            <div class="definition">
                <div class="env-title">Definition (Coherence Weight)</div>
                <p>Define the normalised weight function:</p>
                <div class="equation-box">
                    $$w(\tau; t) := \frac{e^{C(x,\tau)/\Omega}}{Z(t)} \quad \text{where} \quad Z(t) := \int_0^t e^{C(x,s)/\Omega} \, ds$$
                </div>
                <p>Here $C(x,\tau)$ is the coherence at moment $\tau$‚Äîhow far through its cycle the system was at that time.</p>
            </div>
            
            <div class="proposition">
                <div class="env-title">Proposition (Weight Properties)</div>
                <ol>
                    <li>$w(\tau; t) \geq 0$ for all $\tau \in [0,t]$</li>
                    <li>$\int_0^t w(\tau; t) \, d\tau = 1$ (normalisation)</li>
                    <li>$w(\tau; t)$ peaks at moments just before rupture (when $C \approx \Omega$)</li>
                    <li>All rupture moments have equal weight $\approx e/Z(t)$, regardless of when they occurred</li>
                </ol>
            </div>
            
            <h3>1.2 Œ©-Regime Behaviour</h3>
            
            <div class="remark">
                <div class="env-title">Remark (Temperature Analogy)</div>
                <p>$\Omega$ plays the role of "temperature" in the Boltzmann weighting:</p>
                <ul>
                    <li><strong>Low $\Omega$:</strong> Weights concentrate sharply on high-coherence moments‚Äîonly peaks matter</li>
                    <li><strong>High $\Omega$:</strong> Weights spread more uniformly‚Äîthe entire history contributes</li>
                </ul>
                <p>But unlike a recency-biased model, <em>all</em> high-coherence moments contribute equally, whether ancient or recent.</p>
            </div>
            
            <h3>1.3 Euler Calibration</h3>
            
            <div class="success-box">
                <div class="env-title">Euler Calibration</div>
                <p>At rupture, coherence equals threshold: $C(x, t_*) = \Omega$. Therefore, every rupture moment contributes with weight proportional to:</p>
                $$e^{C(x,t_*)/\Omega} = e^{\Omega/\Omega} = e \approx 2.718$$
                <p>This is the fundamental constant of CRR‚Äîthe weight ratio between a rupture moment and a moment of zero coherence is always $e$.</p>
            </div>
            
            <h2>2. Non-Markovian Signature</h2>
            
            <div class="theorem">
                <div class="env-title">Theorem (Path Dependence)</div>
                <p>Two systems with identical current coherence but different histories will in general have different regenerations.</p>
            </div>
            
            <div class="layperson-box">
                <div class="env-title">üí° What This Means</div>
                <p>History matters, not just its summary. Two people at the same point in life but with different histories will respond differently to the same challenge. Significant experiences persist in their influence regardless of how long ago they occurred‚Äîmuscle memory doesn't fade just because it's old.</p>
            </div>
            
            <h2>3. Comparison: Coherence-Weighted vs Recency-Weighted Memory</h2>
            
            <table>
                <tr><th>Property</th><th>CRR (Coherence-Weighted)</th><th>Recency-Weighted</th></tr>
                <tr><td>What determines weight?</td><td>Coherence at each moment: $e^{C(\tau)/\Omega}$</td><td>Time since event: $e^{-\lambda(t-\tau)}$</td></tr>
                <tr><td>Ancient high-coherence moments</td><td>Fully preserved (weight $\approx e$)</td><td>Exponentially forgotten</td></tr>
                <tr><td>Recent low-coherence moments</td><td>Low weight (near 1)</td><td>High weight (recent)</td></tr>
                <tr><td>Philosophical alignment</td><td>Bergson: memory as continuous presence</td><td>Standard decay models</td></tr>
                <tr><td>Empirical match</td><td>Muscle memory, trauma, skill retention</td><td>Short-term forgetting curves</td></tr>
            </table>
        </div>

        <!-- E-I CRITICALITY TAB -->
        <div id="ei" class="tab-content">
            <h2>E-I Balance and the Write Window</h2>
            
            <div class="layperson-box">
                <div class="env-title">üí° The Brain's Balancing Act</div>
                <p>Your brain constantly balances two opposing forces: <strong>excitation</strong> (E) and <strong>inhibition</strong> (I). Tucker, Luu, and Friston (2025) show that consciousness emerges when these forces are <em>perfectly balanced</em>‚Äîat criticality.</p>
                <p>CRR proposes that E and I collapse into a single parameter Œ©. When <strong>C = Œ©</strong>, the inside matches the outside‚Äîthis is the <strong>write window</strong>, where early LTP can occur and experiences become memories.</p>
            </div>
            
            <div class="sim-container">
                <div class="omega-control">
                    <div class="omega-value">Œ© = <span id="omegaVal">1.00</span></div>
                    <div class="omega-label">Temporal Integration Depth = 1/Precision</div>
                    <input type="range" id="omegaSlider" min="0.25" max="2.5" step="0.01" value="1.0">
                    <div><span id="regimeLabel" class="regime-label regime-crit">E ‚âà I ‚Äî CRITICALITY</span></div>
                </div>
                
                <div class="state-box" id="stateBox">
                    <h4>At Criticality (E = I, Œ© ‚âà 1)</h4>
                    <p><strong>Oscillatory:</strong> Theta and gamma/beta meet ‚Üí standing wave resonance.</p>
                    <p><strong>Plasticity:</strong> Resonance plateau lasts ~100-200ms‚Äîoptimal for LTP. This is the write window.</p>
                    <p><strong>CRR:</strong> Coherence C has reached threshold Œ©. The rupture Œ¥(now) fires. The pattern is inscribed.</p>
                    <p class="mechanism">Phenomenology: James's "perchings"‚Äîthe felt now, coherently given, then reorganised.</p>
                </div>
                
                <div class="sim-figures">
                    <div class="sim-figure">
                        <div class="sim-figure-title">A. E and I as Functions of Œ©</div>
                        <canvas id="mappingCanvas" height="180"></canvas>
                        <div class="sim-figure-caption">E ‚àù Œ© (red), I ‚àù 1/Œ© (blue)</div>
                    </div>
                    <div class="sim-figure">
                        <div class="sim-figure-title">B. Memory Weighting exp(C/Œ©)</div>
                        <canvas id="weightingCanvas" height="180"></canvas>
                        <div class="sim-figure-caption">Low Œ©: sharply peaked; High Œ©: broadly uniform</div>
                    </div>
                    <div class="sim-figure">
                        <div class="sim-figure-title">C. CRR Dynamics</div>
                        <canvas id="crrCanvas" height="180"></canvas>
                        <div class="sim-figure-caption">C(t) accumulates until C = Œ© ‚Üí rupture ‚Üí reset</div>
                    </div>
                    <div class="sim-figure">
                        <div class="sim-figure-title">D. Write Window Duration</div>
                        <canvas id="windowCanvas" height="180"></canvas>
                        <div class="sim-figure-caption">Window peaks at criticality (Œ© ‚âà 1)</div>
                    </div>
                </div>
            </div>
            
            <h2>The Tucker-Luu-Friston Framework</h2>
            
            <table>
                <tr><th>System</th><th>Dorsal (Papez)</th><th>Ventral (Yakovlev)</th></tr>
                <tr><td>Control Mode</td><td>Excitatory feedforward</td><td>Inhibitory feedback</td></tr>
                <tr><td>Sleep Consolidation</td><td>REM</td><td>NREM</td></tr>
                <tr><td>CRR Mapping</td><td>High Œ©</td><td>Low Œ©</td></tr>
            </table>
            
            <div class="success-box">
                <div class="env-title">The Write Window: When C = Œ©</div>
                <p>At rupture: E and I are balanced, a standing wave resonance forms (~100-200ms), LTP can occur, the pattern is inscribed. This is the neural mechanism for James's "perchings."</p>
            </div>
        </div>

        <!-- FEP CONNECTION TAB -->
        <div id="fep" class="tab-content">
            <h2>1. CRR as Process Theory for Active Inference</h2>
            
            <div class="layperson-box">
                <div class="env-title">üí° What is the Free Energy Principle?</div>
                <p>The FEP proposes that living systems survive by minimising "free energy"‚Äîthe mismatch between what they expect and experience. CRR provides the <em>temporal dynamics</em> that FEP presupposes: <strong>when</strong> do beliefs update? <strong>How</strong> does history shape reconstitution?</p>
            </div>
            
            <h3>1.1 The Central Correspondence</h3>
            
            <table class="correspondence-table">
                <tr><th>Question</th><th>FEP Answer</th><th>CRR Extension</th></tr>
                <tr><td>What do beliefs update to?</td><td>Free energy minimum</td><td>(Presupposed)</td></tr>
                <tr><td>When does updating occur?</td><td>(Not explicit)</td><td>When $C(x,t) \geq \Omega$</td></tr>
                <tr><td>How does history shape reconstitution?</td><td>(Not explicit)</td><td>Via $\mathcal{R} = \mathbb{E}_w[\Phi]$</td></tr>
                <tr><td>What triggers discrete insight?</td><td>Bayesian Model Reduction</td><td>Rupture $\delta(t - t_*)$</td></tr>
            </table>
            
            <h2>2. Rupture IS Occam's Razor</h2>
            
            <div class="layperson-box">
                <div class="env-title">üí° The "Aha Moment" Correspondence</div>
                <p>In Friston et al. (2025) "Active Inference and Artificial Reasoning," an <strong>"aha moment"</strong> occurs when evidence accumulates until confidence exceeds a threshold, triggering Bayesian Model Reduction. CRR's <strong>Rupture</strong> is the same phenomenon.</p>
            </div>
            
            <div class="theorem">
                <div class="env-title">Theorem (Rupture-BMR Isomorphism)</div>
                <p>CRR Rupture and Bayesian Model Reduction share: (1) Accumulation of evidence/coherence, (2) Threshold criterion, (3) Discrete transition, (4) Reconstitution based on history.</p>
            </div>
            
            <h3>2.1 Mathematical Correspondence</h3>
            
            <table class="correspondence-table">
                <tr><th>CRR Concept</th><th>FEP Concept</th><th>Mapping</th></tr>
                <tr><td>Coherence $C(x,t)$</td><td>Evidence since last update</td><td>$C \leftrightarrow \log p(D_{\text{new}}|m)$</td></tr>
                <tr><td>Threshold $\Omega$</td><td>Model selection threshold</td><td>$\Omega \leftrightarrow \theta$</td></tr>
                <tr><td>Rupture $\delta(t-t_*)$</td><td>BMR / Occam's Razor</td><td>$\{C \geq \Omega\} \leftrightarrow \{\max_m p(m|D) > \theta\}$</td></tr>
            </table>
            
            <div class="definition">
                <div class="env-title">Definition (Threshold-Precision Correspondence)</div>
                <p>The threshold parameter corresponds to inverse precision:</p>
                <div class="equation-box">$$\Omega = \frac{1}{\pi} = \sigma^2$$</div>
                <p>This creates a three-way bridge: geometric ($1/\varphi$), statistical ($\sigma^2$), and inferential ($1/\pi$).</p>
            </div>
            
            <div class="success-box">
                <div class="env-title">The Central Insight</div>
                <p><strong>Rupture IS the "aha moment."</strong> Both frameworks describe the discrete transition from uncertainty to commitment when accumulated evidence warrants model selection.</p>
                <div class="equation-box">$$\underbrace{C(x,t) \geq \Omega}_{\text{CRR Rupture}} \quad \Longleftrightarrow \quad \underbrace{\max_m p(m|D) > \theta}_{\text{FEP: Occam's Razor}}$$</div>
            </div>
            
            <h2>3. References</h2>
            <div class="references">
                <p>Friston, K., et al. (2025). Active inference and artificial reasoning. <em>arXiv:2512.21129</em>.</p>
                <p>Tucker, D. M., Luu, P., & Friston, K. J. (2025). The Criticality of Consciousness. <em>Entropy</em>, 27(8), 829.</p>
                <p>Parr, T., Pezzulo, G., & Friston, K. J. (2022). <em>Active Inference</em>. MIT Press.</p>
            </div>
        </div>

        <!-- EMPIRICAL TAB -->
        <div id="empirical" class="tab-content">
            <h2>1. Testable Predictions</h2>
            
            <div class="theorem">
                <div class="env-title">Conjecture (Œ©-Phase Relationship)</div>
                <p>For systems whose coherence-rupture cycle has underlying phase structure:</p>
                <div class="equation-box">$$\Omega = \frac{1}{\varphi}$$</div>
                <p>where $\varphi$ is the phase (in radians) traversed during one coherence accumulation cycle.</p>
            </div>
            
            <table>
                <tr><th>Symmetry</th><th>Phase to Rupture</th><th>$\Omega$ Value</th><th>CV Prediction</th></tr>
                <tr><td>$\mathbb{Z}_2$ (flip)</td><td>$\pi$ (half-cycle)</td><td>$1/\pi \approx 0.318$</td><td>$\approx 0.159$</td></tr>
                <tr><td>$SO(2)$ (rotation)</td><td>$2\pi$ (full-cycle)</td><td>$1/2\pi \approx 0.159$</td><td>$\approx 0.080$</td></tr>
            </table>
            
            <div class="success-box">
                <div class="env-title">$\mathbb{Z}_2$ Systems: $CV \approx 0.159$</div>
                <p><strong>Saltatory growth</strong> (Lampl & Johnson, 1998): Prediction $CV \approx 0.159$, Observed $CV \approx 0.15$‚Äì$0.16$. Status: <strong>Confirmed</strong> (11/11 individual predictions).</p>
            </div>
            
            <h2>2. Summary of Empirical Status</h2>
            
            <table>
                <tr><th>Domain</th><th>Test Type</th><th>Status</th></tr>
                <tr><td>Saltatory growth</td><td>Prospective</td><td>Confirmed</td></tr>
                <tr><td>Wound healing</td><td>Post-hoc fit</td><td>Consistent ($R^2 = 0.9989$)</td></tr>
                <tr><td>Muscle hypertrophy</td><td>Mixed</td><td>Consistent (10/10)</td></tr>
            </table>
            
            <h2>3. Falsification Criteria</h2>
            <p>The framework would be challenged if: $\mathbb{Z}_2$ systems showed $CV$ significantly different from $\sim 0.16$, $SO(2)$ systems showed $CV$ significantly different from $\sim 0.08$, or regeneration proved Markovian (no path dependence).</p>
            
            <div class="warning-box">
                <p><strong>Current assessment:</strong> Preliminary evidence is encouraging but not conclusive. The framework generates specific, testable predictions that distinguish it from generic curve-fitting.</p>
            </div>
        </div>
    </div>
    
    <script>
        'use strict';
        
        function openTab(evt, tabName) {
            document.querySelectorAll(".tab-content").forEach(t => t.classList.remove("active"));
            document.querySelectorAll(".tab-button").forEach(b => b.classList.remove("active"));
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
            if (typeof MathJax !== 'undefined') MathJax.typesetPromise([document.getElementById(tabName)]);
            if (tabName === 'ei') setTimeout(() => { resizeCanvases(); drawAll(); }, 100);
        }
        
        let omega = 1.0, C = 0, cHistory = [];
        const HIST_LEN = 200;
        const canvases = {};
        const ctxs = {};
        
        function initCanvases() {
            ['mappingCanvas', 'weightingCanvas', 'crrCanvas', 'windowCanvas'].forEach(id => {
                canvases[id] = document.getElementById(id);
                if (canvases[id]) ctxs[id] = canvases[id].getContext('2d');
            });
        }
        
        function resizeCanvases() {
            Object.values(canvases).forEach(c => { if (c) { c.width = c.offsetWidth || 400; c.height = 180; }});
        }
        
        function updateStateBox() {
            const box = document.getElementById('stateBox');
            const label = document.getElementById('regimeLabel');
            if (!box || !label) return;
            if (omega < 0.6) {
                label.className = 'regime-label regime-i';
                label.textContent = 'I > E ‚Äî INHIBITION DOMINANT';
                box.innerHTML = '<h4>I-Dominant Regime (Low Œ©)</h4><p><strong>CRR:</strong> Frequent but shallow ruptures. exp(C/Œ©) sharply peaked‚Äîselective memory.</p><p class="mechanism">Phenomenology: Hyper-focused, anxious.</p>';
            } else if (omega > 1.5) {
                label.className = 'regime-label regime-e';
                label.textContent = 'E > I ‚Äî EXCITATION DOMINANT';
                box.innerHTML = '<h4>E-Dominant Regime (High Œ©)</h4><p><strong>CRR:</strong> Rare but deep ruptures. exp(C/Œ©) broadly uniform‚Äîintegrative memory.</p><p class="mechanism">Phenomenology: Loose, dream-like.</p>';
            } else {
                label.className = 'regime-label regime-crit';
                label.textContent = 'E ‚âà I ‚Äî CRITICALITY';
                box.innerHTML = '<h4>Critical Regime (Œ© ‚âà 1)</h4><p><strong>Oscillatory:</strong> Theta and gamma/beta meet ‚Üí standing wave resonance.</p><p><strong>CRR:</strong> Coherence reaches threshold cleanly. System is maximally sensitive.</p><p class="mechanism">Phenomenology: James\'s "perchings"‚Äîthe felt now.</p>';
            }
        }
        
        function drawMapping() {
            const ctx = ctxs.mappingCanvas, c = canvases.mappingCanvas;
            if (!ctx) return;
            const w = c.width, h = c.height;
            ctx.fillStyle = '#fff'; ctx.fillRect(0, 0, w, h);
            const m = {l:40, r:15, t:15, b:28}, pw = w-m.l-m.r, ph = h-m.t-m.b;
            ctx.fillStyle = 'rgba(100,180,100,0.15)';
            const toX = om => m.l + ((om-0.25)/2.25)*pw;
            ctx.fillRect(toX(0.7), m.t, toX(1.4)-toX(0.7), ph);
            ctx.strokeStyle = '#000'; ctx.lineWidth = 1;
            ctx.beginPath(); ctx.moveTo(m.l, m.t); ctx.lineTo(m.l, h-m.b); ctx.lineTo(w-m.r, h-m.b); ctx.stroke();
            const toY = v => m.t + ph*(1-Math.min(v,2.5)/2.5);
            ctx.strokeStyle = '#cc3333'; ctx.lineWidth = 2; ctx.beginPath();
            for (let i=0; i<=100; i++) { const om = 0.25+(i/100)*2.25; if (i===0) ctx.moveTo(toX(om), toY(om)); else ctx.lineTo(toX(om), toY(om)); }
            ctx.stroke();
            ctx.strokeStyle = '#2266aa'; ctx.beginPath();
            for (let i=0; i<=100; i++) { const om = 0.25+(i/100)*2.25; if (i===0) ctx.moveTo(toX(om), toY(1/om)); else ctx.lineTo(toX(om), toY(1/om)); }
            ctx.stroke();
            ctx.fillStyle = '#339933'; ctx.beginPath(); ctx.arc(toX(1), toY(1), 5, 0, Math.PI*2); ctx.fill();
            ctx.fillStyle = '#000'; ctx.beginPath(); ctx.moveTo(toX(omega), h-m.b); ctx.lineTo(toX(omega)-5, h-m.b+8); ctx.lineTo(toX(omega)+5, h-m.b+8); ctx.fill();
        }
        
        function drawWeighting() {
            const ctx = ctxs.weightingCanvas, c = canvases.weightingCanvas;
            if (!ctx) return;
            const w = c.width, h = c.height;
            ctx.fillStyle = '#fff'; ctx.fillRect(0, 0, w, h);
            const m = {l:40, r:15, t:15, b:28}, pw = w-m.l-m.r, ph = h-m.t-m.b;
            ctx.strokeStyle = '#000'; ctx.lineWidth = 1;
            ctx.beginPath(); ctx.moveTo(m.l, m.t); ctx.lineTo(m.l, h-m.b); ctx.lineTo(w-m.r, h-m.b); ctx.stroke();
            const cMax = 2.5, maxExp = Math.exp(cMax/omega);
            ctx.strokeStyle = '#339933'; ctx.lineWidth = 2; ctx.beginPath();
            for (let i=0; i<=100; i++) {
                const cVal = (i/100)*cMax, expVal = Math.exp(cVal/omega);
                const x = m.l + (i/100)*pw, y = m.t + ph*(1-expVal/maxExp);
                if (i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
            }
            ctx.stroke();
            ctx.font = '10px sans-serif'; ctx.fillStyle = '#339933'; ctx.textAlign = 'left';
            ctx.fillText('exp(C/Œ©)', m.l+5, m.t+15);
            ctx.fillStyle = '#000'; ctx.textAlign = 'center';
            ctx.fillText('Coherence C (within cycle)', w/2, h-5);
        }
        
        function drawCRR() {
            const ctx = ctxs.crrCanvas, c = canvases.crrCanvas;
            if (!ctx) return;
            const w = c.width, h = c.height;
            ctx.fillStyle = '#fff'; ctx.fillRect(0, 0, w, h);
            const m = {l:40, r:15, t:15, b:28}, pw = w-m.l-m.r, ph = h-m.t-m.b, maxC = 2.5;
            ctx.strokeStyle = '#000'; ctx.lineWidth = 1;
            ctx.beginPath(); ctx.moveTo(m.l, m.t); ctx.lineTo(m.l, h-m.b); ctx.lineTo(w-m.r, h-m.b); ctx.stroke();
            const threshY = m.t + ph*(1-omega/maxC);
            ctx.strokeStyle = '#cc3333'; ctx.lineWidth = 1.5; ctx.setLineDash([5,5]);
            ctx.beginPath(); ctx.moveTo(m.l, threshY); ctx.lineTo(w-m.r, threshY); ctx.stroke(); ctx.setLineDash([]);
            ctx.fillStyle = '#cc3333'; ctx.font = '10px sans-serif'; ctx.textAlign = 'left';
            ctx.fillText('Œ© = '+omega.toFixed(2), m.l+5, threshY-5);
            if (cHistory.length > 1) {
                ctx.strokeStyle = '#2266aa'; ctx.lineWidth = 2; ctx.beginPath();
                for (let i=0; i<cHistory.length; i++) {
                    const x = m.l + (i/HIST_LEN)*pw, y = m.t + ph*(1-cHistory[i]/maxC);
                    if (i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
                }
                ctx.stroke();
            }
        }
        
        function drawWindow() {
            const ctx = ctxs.windowCanvas, c = canvases.windowCanvas;
            if (!ctx) return;
            const w = c.width, h = c.height;
            ctx.fillStyle = '#fff'; ctx.fillRect(0, 0, w, h);
            const m = {l:40, r:15, t:15, b:28}, pw = w-m.l-m.r, ph = h-m.t-m.b;
            ctx.strokeStyle = '#000'; ctx.lineWidth = 1;
            ctx.beginPath(); ctx.moveTo(m.l, m.t); ctx.lineTo(m.l, h-m.b); ctx.lineTo(w-m.r, h-m.b); ctx.stroke();
            ctx.strokeStyle = '#339933'; ctx.lineWidth = 2; ctx.beginPath();
            for (let i=0; i<=pw; i++) {
                const om = 0.25 + (i/pw)*2.25, balance = 1-Math.abs(1-om), dur = Math.max(0, balance*balance);
                const y = m.t + ph*(1-dur);
                if (i===0) ctx.moveTo(m.l+i, y); else ctx.lineTo(m.l+i, y);
            }
            ctx.stroke();
            const currX = m.l + ((omega-0.25)/2.25)*pw;
            const currBalance = 1-Math.abs(1-omega), currDur = Math.max(0, currBalance*currBalance);
            const currY = m.t + ph*(1-currDur);
            ctx.fillStyle = '#339933'; ctx.beginPath(); ctx.arc(currX, currY, 5, 0, Math.PI*2); ctx.fill();
        }
        
        function drawAll() { drawMapping(); drawWeighting(); drawCRR(); drawWindow(); }
        
        function updateCRR() {
            C += 0.015 * (0.8 + Math.random()*0.4);
            if (C >= omega) C = 0;
            cHistory.push(C);
            if (cHistory.length > HIST_LEN) cHistory.shift();
        }
        
        function animate() { updateCRR(); drawAll(); requestAnimationFrame(animate); }
        
        document.addEventListener('DOMContentLoaded', () => {
            initCanvases();
            const slider = document.getElementById('omegaSlider');
            if (slider) {
                slider.addEventListener('input', e => {
                    omega = parseFloat(e.target.value);
                    document.getElementById('omegaVal').textContent = omega.toFixed(2);
                    updateStateBox();
                    cHistory = [];
                });
            }
            window.addEventListener('resize', () => { resizeCanvases(); drawAll(); });
            setTimeout(() => { resizeCanvases(); updateStateBox(); animate(); }, 100);
        });
    </script>
</body>
</html>
