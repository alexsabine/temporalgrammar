<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRR Star: Sirius A</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000008;
            color: #e0e0e0;
            font-family: 'Courier New', monospace;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px 0 30px;
            border-bottom: 1px solid #1a1a3a;
        }
        
        h1 {
            font-size: 1.8em;
            font-weight: 300;
            color: #cad9ff;
            letter-spacing: 4px;
            margin-bottom: 8px;
        }
        
        .subtitle {
            color: #6a7a9a;
            font-size: 0.85em;
            letter-spacing: 2px;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        @media (max-width: 1000px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        /* Star Display */
        .star-container {
            background: radial-gradient(ellipse at center, #000010 0%, #000005 100%);
            border-radius: 12px;
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 450px;
            position: relative;
            overflow: hidden;
        }
        
        .star-field {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .background-star {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.3;
        }
        
        #sirius-canvas {
            position: relative;
            z-index: 10;
        }
        
        .star-info {
            text-align: center;
            margin-top: 20px;
            z-index: 10;
        }
        
        .star-name {
            font-size: 1.4em;
            color: #cad9ff;
            letter-spacing: 3px;
            margin-bottom: 5px;
        }
        
        .star-designation {
            color: #5a6a8a;
            font-size: 0.75em;
            letter-spacing: 1px;
        }
        
        /* Calculations Panel */
        .calculations {
            background: #0a0a14;
            border-radius: 12px;
            padding: 25px;
            border: 1px solid #1a1a3a;
        }
        
        .calc-header {
            color: #8a9aba;
            font-size: 0.75em;
            letter-spacing: 2px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #1a1a3a;
        }
        
        .crr-equation {
            background: #0f0f1a;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-family: 'Times New Roman', serif;
            font-size: 1.1em;
            text-align: center;
            color: #a0b0d0;
            border-left: 3px solid #3a4a7a;
        }
        
        .crr-component {
            background: #080810;
            padding: 12px 15px;
            border-radius: 6px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .component-label {
            color: #6a7a9a;
            font-size: 0.8em;
        }
        
        .component-value {
            color: #cad9ff;
            font-size: 0.9em;
            font-weight: bold;
        }
        
        .live-value {
            color: #7affaa;
            transition: color 0.1s;
        }
        
        .live-value.flash {
            color: #ffffff;
        }
        
        /* CRR Systems Grid */
        .systems-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }
        
        @media (max-width: 1000px) {
            .systems-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .system-panel {
            background: #0a0a14;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #1a1a3a;
        }
        
        .system-title {
            color: #8a9aba;
            font-size: 0.7em;
            letter-spacing: 2px;
            margin-bottom: 15px;
        }
        
        .system-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #151525;
            font-size: 0.8em;
        }
        
        .system-row:last-child {
            border-bottom: none;
        }
        
        .system-label {
            color: #5a6a8a;
        }
        
        .system-value {
            color: #a0b0c0;
        }
        
        .symmetry-z2 {
            color: #ff9a7a;
        }
        
        .symmetry-so2 {
            color: #7affda;
        }
        
        /* Coherence Timeline */
        .timeline-container {
            grid-column: 1 / -1;
            background: #0a0a14;
            border-radius: 12px;
            padding: 25px;
            border: 1px solid #1a1a3a;
            margin-top: 10px;
        }
        
        .timeline-title {
            color: #8a9aba;
            font-size: 0.7em;
            letter-spacing: 2px;
            margin-bottom: 20px;
        }
        
        .timeline {
            position: relative;
            height: 120px;
        }
        
        .timeline-bar {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, 
                #ff6a4a 0%, 
                #ffaa4a 20%,
                #4affaa 40%,
                #4a9aff 60%,
                #aa6aff 80%,
                #ff6aaa 100%
            );
            transform: translateY(-50%);
        }
        
        .timeline-point {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 16px;
            height: 16px;
            border-radius: 50%;
            border: 2px solid;
            background: #0a0a14;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .timeline-point:hover {
            transform: translate(-50%, -50%) scale(1.3);
        }
        
        .timeline-point.active {
            box-shadow: 0 0 20px currentColor;
        }
        
        .point-label {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            margin-top: 25px;
            font-size: 0.65em;
            color: #5a6a8a;
            white-space: nowrap;
            text-align: center;
        }
        
        .point-time {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            margin-bottom: 25px;
            font-size: 0.6em;
            color: #3a4a6a;
            white-space: nowrap;
        }
        
        /* Real-time Display */
        .realtime-panel {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #0a0a14 0%, #0f0f1f 100%);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid #2a2a4a;
            margin-top: 10px;
        }
        
        .realtime-title {
            color: #7affaa;
            font-size: 0.7em;
            letter-spacing: 2px;
            margin-bottom: 15px;
        }
        
        .realtime-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .realtime-item {
            background: #080810;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .realtime-label {
            color: #4a5a7a;
            font-size: 0.65em;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        
        .realtime-value {
            color: #7affaa;
            font-size: 1.4em;
            font-weight: bold;
        }
        
        .realtime-unit {
            color: #3a4a6a;
            font-size: 0.7em;
            margin-top: 3px;
        }
        
        /* Footer */
        footer {
            text-align: center;
            padding: 30px;
            color: #3a4a6a;
            font-size: 0.7em;
            margin-top: 30px;
            border-top: 1px solid #1a1a3a;
        }
        
        footer a {
            color: #5a7aaa;
            text-decoration: none;
        }
        
        /* Animations */
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        @keyframes twinkle {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>CRR STAR</h1>
            <div class="subtitle">COHERENCE–RUPTURE–REGENERATION FROM SIRIUS TO VISUAL CORTEX</div>
        </header>
        
        <div class="main-content">
            <!-- Star Display -->
            <div class="star-container">
                <div class="star-field" id="starField"></div>
                <canvas id="sirius-canvas" width="280" height="280"></canvas>
                <div class="star-info">
                    <div class="star-name">SIRIUS A</div>
                    <div class="star-designation">α Canis Majoris · 8.6 Light-Years · Magnitude -1.46</div>
                </div>
            </div>
            
            <!-- CRR Calculations -->
            <div class="calculations">
                <div class="calc-header">CRR FRAMEWORK EQUATIONS</div>
                
                <div class="crr-equation">
                    C(x,t) = ∫ L(x,τ) dτ
                </div>
                <div class="crr-component">
                    <span class="component-label">Coherence Accumulation</span>
                    <span class="component-value live-value" id="coherence-live">calculating...</span>
                </div>
                
                <div class="crr-equation">
                    δ(now) — Rupture Event
                </div>
                <div class="crr-component">
                    <span class="component-label">Rupture Count (this session)</span>
                    <span class="component-value live-value" id="rupture-count">0</span>
                </div>
                
                <div class="crr-equation">
                    R = ∫ φ(x,τ) · exp(C/Ω) · Θ(...) dτ
                </div>
                <div class="crr-component">
                    <span class="component-label">exp(C/Ω) Memory Weight</span>
                    <span class="component-value live-value" id="memory-weight">calculating...</span>
                </div>
                
                <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #1a1a3a;">
                    <div class="crr-component">
                        <span class="component-label">Ω (Z₂) = 1/π</span>
                        <span class="component-value">0.31831</span>
                    </div>
                    <div class="crr-component">
                        <span class="component-label">Ω (SO(2)) = 1/2π</span>
                        <span class="component-value">0.15915</span>
                    </div>
                    <div class="crr-component">
                        <span class="component-label">e<sup>π</sup> (Hierarchical Gain)</span>
                        <span class="component-value">23.1407</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- CRR Systems -->
        <div class="systems-grid">
            <!-- Stellar Systems -->
            <div class="system-panel">
                <div class="system-title">STELLAR CRR SYSTEMS</div>
                
                <div class="system-row">
                    <span class="system-label">Fusion Cycle</span>
                    <span class="system-value">τ = 10<sup>-15</sup>s · <span class="symmetry-z2">Z₂</span></span>
                </div>
                <div class="system-row">
                    <span class="system-label">Photon Diffusion</span>
                    <span class="system-value">τ = 10<sup>-10</sup>s · <span class="symmetry-so2">SO(2)</span></span>
                </div>
                <div class="system-row">
                    <span class="system-label">Convective Cells</span>
                    <span class="system-value">τ = 7 days · <span class="symmetry-so2">SO(2)</span></span>
                </div>
                <div class="system-row">
                    <span class="system-label">Surface Oscillations</span>
                    <span class="system-value">τ = 46 min · <span class="symmetry-so2">SO(2)</span></span>
                </div>
                <div class="system-row">
                    <span class="system-label">Photon Escape Time</span>
                    <span class="system-value">~10,000 years</span>
                </div>
                <div class="system-row">
                    <span class="system-label">Light Travel to Earth</span>
                    <span class="system-value">8.6 years</span>
                </div>
            </div>
            
            <!-- Perceptual Systems -->
            <div class="system-panel">
                <div class="system-title">PERCEPTUAL CRR SYSTEMS</div>
                
                <div class="system-row">
                    <span class="system-label">Atmospheric Turbulence</span>
                    <span class="system-value">τ = 3.14ms · <span class="symmetry-so2">SO(2)</span></span>
                </div>
                <div class="system-row">
                    <span class="system-label">Scintillation</span>
                    <span class="system-value" id="scintillation-live">f = 318 Hz</span>
                </div>
                <div class="system-row">
                    <span class="system-label">Retinal Integration</span>
                    <span class="system-value">τ = 100ms · <span class="symmetry-z2">Z₂</span></span>
                </div>
                <div class="system-row">
                    <span class="system-label">V1 Gamma Rhythm</span>
                    <span class="system-value">40 Hz · <span class="symmetry-so2">SO(2)</span></span>
                </div>
                <div class="system-row">
                    <span class="system-label">Display Refresh</span>
                    <span class="system-value">60 Hz · <span class="symmetry-z2">Z₂</span></span>
                </div>
                <div class="system-row">
                    <span class="system-label">Cortical Hierarchy Gain</span>
                    <span class="system-value">e<sup>π</sup> ≈ 23.14 per level</span>
                </div>
            </div>
        </div>
        
        <!-- Coherence Timeline -->
        <div class="timeline-container">
            <div class="timeline-title">COHERENCE CHAIN: STELLAR CORE → CONSCIOUS PERCEPTION</div>
            <div class="timeline">
                <div class="timeline-bar"></div>
                
                <div class="timeline-point" style="left: 0%; border-color: #ff6a4a; color: #ff6a4a;" id="point-fusion">
                    <div class="point-time">10<sup>-15</sup>s</div>
                    <div class="point-label">Fusion<br>Z₂</div>
                </div>
                
                <div class="timeline-point" style="left: 15%; border-color: #ff8a4a; color: #ff8a4a;" id="point-diffusion">
                    <div class="point-time">10<sup>-10</sup>s</div>
                    <div class="point-label">Photon<br>Diffusion</div>
                </div>
                
                <div class="timeline-point" style="left: 30%; border-color: #ffaa4a; color: #ffaa4a;" id="point-escape">
                    <div class="point-time">~10⁴ yr</div>
                    <div class="point-label">Surface<br>Escape</div>
                </div>
                
                <div class="timeline-point" style="left: 45%; border-color: #4affaa; color: #4affaa;" id="point-travel">
                    <div class="point-time">8.6 yr</div>
                    <div class="point-label">Interstellar<br>Transit</div>
                </div>
                
                <div class="timeline-point" style="left: 60%; border-color: #4adaff; color: #4adaff;" id="point-atm">
                    <div class="point-time">3.14ms</div>
                    <div class="point-label">Atmosphere<br>SO(2)</div>
                </div>
                
                <div class="timeline-point" style="left: 75%; border-color: #8a6aff; color: #8a6aff;" id="point-retina">
                    <div class="point-time">100ms</div>
                    <div class="point-label">Retina<br>Z₂</div>
                </div>
                
                <div class="timeline-point" style="left: 90%; border-color: #ff6aaa; color: #ff6aaa;" id="point-cortex">
                    <div class="point-time">25ms</div>
                    <div class="point-label">V1 Cortex<br>SO(2)</div>
                </div>
            </div>
        </div>
        
        <!-- Real-time Panel -->
        <div class="realtime-panel">
            <div class="realtime-title">◉ LIVE CRR DYNAMICS</div>
            <div class="realtime-grid">
                <div class="realtime-item">
                    <div class="realtime-label">DISPLAY RUPTURES</div>
                    <div class="realtime-value" id="display-ruptures">0</div>
                    <div class="realtime-unit">frame cycles</div>
                </div>
                <div class="realtime-item">
                    <div class="realtime-label">ATMOSPHERIC δ EVENTS</div>
                    <div class="realtime-value" id="atm-ruptures">0</div>
                    <div class="realtime-unit">turbulence cells</div>
                </div>
                <div class="realtime-item">
                    <div class="realtime-label">RETINAL INTEGRATION</div>
                    <div class="realtime-value" id="retinal-cycles">0</div>
                    <div class="realtime-unit">photon captures</div>
                </div>
                <div class="realtime-item">
                    <div class="realtime-label">V1 GAMMA CYCLES</div>
                    <div class="realtime-value" id="gamma-cycles">0</div>
                    <div class="realtime-unit">oscillations</div>
                </div>
                <div class="realtime-item">
                    <div class="realtime-label">CURRENT BRIGHTNESS</div>
                    <div class="realtime-value" id="current-brightness">100%</div>
                    <div class="realtime-unit">scintillation</div>
                </div>
                <div class="realtime-item">
                    <div class="realtime-label">SESSION COHERENCE</div>
                    <div class="realtime-value" id="session-coherence">0.00</div>
                    <div class="realtime-unit">C(x,t) units</div>
                </div>
            </div>
        </div>
        
        <!-- Cortical Hierarchy Detail -->
        <div class="systems-grid" style="margin-top: 20px;">
            <div class="system-panel">
                <div class="system-title">CORTICAL HIERARCHY (π-SCALING)</div>
                <div class="system-row">
                    <span class="system-label">V1 (Primary Visual)</span>
                    <span class="system-value">25.0 ms</span>
                </div>
                <div class="system-row">
                    <span class="system-label">V2 (× π)</span>
                    <span class="system-value">78.5 ms</span>
                </div>
                <div class="system-row">
                    <span class="system-label">V4 (× π²)</span>
                    <span class="system-value">246.7 ms</span>
                </div>
                <div class="system-row">
                    <span class="system-label">IT (× π³)</span>
                    <span class="system-value">775.2 ms</span>
                </div>
                <div class="system-row">
                    <span class="system-label">PFC (× π⁴)</span>
                    <span class="system-value">2435.2 ms</span>
                </div>
            </div>
            
            <div class="system-panel">
                <div class="system-title">SIRIUS A PROPERTIES</div>
                <div class="system-row">
                    <span class="system-label">Surface Temperature</span>
                    <span class="system-value">9,940 K</span>
                </div>
                <div class="system-row">
                    <span class="system-label">Peak Wavelength</span>
                    <span class="system-value">291 nm (UV)</span>
                </div>
                <div class="system-row">
                    <span class="system-label">Color (RGB)</span>
                    <span class="system-value" style="color: rgb(202, 218, 255);">■ (202, 218, 255)</span>
                </div>
                <div class="system-row">
                    <span class="system-label">Mass</span>
                    <span class="system-value">2.063 M<sub>☉</sub></span>
                </div>
                <div class="system-row">
                    <span class="system-label">Luminosity</span>
                    <span class="system-value">25.4 L<sub>☉</sub></span>
                </div>
            </div>
        </div>
        
        <footer>
            CRR Framework © 2025 Alexander Sabine · <a href="https://cohere.org.uk">cohere.org.uk</a><br>
            <span style="color: #2a3a5a;">Ω = 1/π (Z₂) · Ω = 1/2π (SO(2)) · CV = Ω/2</span>
        </footer>
    </div>
    
    <script>
        // CRR Constants
        const OMEGA_Z2 = 1 / Math.PI;  // 0.31831
        const OMEGA_SO2 = 1 / (2 * Math.PI);  // 0.15915
        const EXP_PI = Math.exp(Math.PI);  // 23.1407
        
        // Timescales (seconds)
        const TAU_DISPLAY = 1/60;
        const TAU_ATM = 0.00314;
        const TAU_RETINAL = 0.1;
        const TAU_GAMMA = 0.025;
        
        // Star color (from calculation)
        const SIRIUS_RGB = { r: 202, g: 218, b: 255 };
        
        // State
        let startTime = Date.now();
        let displayRuptures = 0;
        let atmRuptures = 0;
        let retinalCycles = 0;
        let gammaCycles = 0;
        let sessionCoherence = 0;
        let lastFrameTime = 0;
        let lastAtmTime = 0;
        let lastRetinalTime = 0;
        let lastGammaTime = 0;
        
        // Scintillation simulation
        let scintillationPhase = 0;
        let currentBrightness = 1.0;
        
        // Canvas setup
        const canvas = document.getElementById('sirius-canvas');
        const ctx = canvas.getContext('2d');
        
        // Create background stars
        function createStarField() {
            const field = document.getElementById('starField');
            for (let i = 0; i < 50; i++) {
                const star = document.createElement('div');
                star.className = 'background-star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                const size = Math.random() * 2 + 0.5;
                star.style.width = size + 'px';
                star.style.height = size + 'px';
                star.style.opacity = Math.random() * 0.3 + 0.1;
                field.appendChild(star);
            }
        }
        
        // Draw Sirius with scintillation
        function drawSirius(brightness) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const cx = canvas.width / 2;
            const cy = canvas.height / 2;
            
            // Multiple glow layers for realism
            const glowLayers = [
                { radius: 80, alpha: 0.03 },
                { radius: 60, alpha: 0.05 },
                { radius: 45, alpha: 0.08 },
                { radius: 30, alpha: 0.12 },
                { radius: 20, alpha: 0.2 },
                { radius: 12, alpha: 0.4 },
                { radius: 6, alpha: 0.8 }
            ];
            
            // Draw glow layers
            glowLayers.forEach(layer => {
                const gradient = ctx.createRadialGradient(cx, cy, 0, cx, cy, layer.radius * brightness);
                gradient.addColorStop(0, `rgba(${SIRIUS_RGB.r}, ${SIRIUS_RGB.g}, ${SIRIUS_RGB.b}, ${layer.alpha * brightness})`);
                gradient.addColorStop(0.5, `rgba(${SIRIUS_RGB.r}, ${SIRIUS_RGB.g}, ${SIRIUS_RGB.b}, ${layer.alpha * 0.3 * brightness})`);
                gradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
                
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.arc(cx, cy, layer.radius * brightness, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // Diffraction spikes (for point source through atmosphere)
            ctx.strokeStyle = `rgba(${SIRIUS_RGB.r}, ${SIRIUS_RGB.g}, ${SIRIUS_RGB.b}, ${0.15 * brightness})`;
            ctx.lineWidth = 1;
            
            const spikeLength = 50 * brightness;
            const angles = [0, Math.PI/2, Math.PI, 3*Math.PI/2];
            
            angles.forEach(angle => {
                ctx.beginPath();
                ctx.moveTo(cx, cy);
                ctx.lineTo(
                    cx + Math.cos(angle) * spikeLength,
                    cy + Math.sin(angle) * spikeLength
                );
                ctx.stroke();
            });
            
            // Core point
            const coreGradient = ctx.createRadialGradient(cx, cy, 0, cx, cy, 4);
            coreGradient.addColorStop(0, `rgba(255, 255, 255, ${brightness})`);
            coreGradient.addColorStop(0.5, `rgba(${SIRIUS_RGB.r}, ${SIRIUS_RGB.g}, ${SIRIUS_RGB.b}, ${brightness})`);
            coreGradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
            
            ctx.fillStyle = coreGradient;
            ctx.beginPath();
            ctx.arc(cx, cy, 4, 0, Math.PI * 2);
            ctx.fill();
        }
        
        // Scintillation model (Kolmogorov turbulence)
        function computeScintillation(t) {
            // Multiple frequency components (turbulence cascade)
            const f1 = 318;  // 1/TAU_ATM Hz
            const f2 = 159;  // Subharmonic
            const f3 = 50;   // Large eddy
            
            // Scintillation index ~0.1 for Sirius at 35° altitude
            const sigmaI = 0.1;
            
            // Superposition of turbulent components
            const variation = 
                0.5 * Math.sin(2 * Math.PI * f1 * t + scintillationPhase) +
                0.3 * Math.sin(2 * Math.PI * f2 * t + scintillationPhase * 1.3) +
                0.2 * Math.sin(2 * Math.PI * f3 * t + scintillationPhase * 0.7);
            
            return 1.0 + sigmaI * variation;
        }
        
        // CRR coherence accumulation
        function computeCoherence(dt) {
            // Simplified: C(x,t) = ∫L(x,τ)dτ with L=1
            return dt;
        }
        
        // Memory weight exp(C/Ω)
        function computeMemoryWeight(C, omega) {
            return Math.exp(Math.min(C / omega, 10));  // Cap for display
        }
        
        // Update live displays
        function updateDisplays() {
            document.getElementById('display-ruptures').textContent = displayRuptures.toLocaleString();
            document.getElementById('atm-ruptures').textContent = atmRuptures.toLocaleString();
            document.getElementById('retinal-cycles').textContent = retinalCycles.toLocaleString();
            document.getElementById('gamma-cycles').textContent = gammaCycles.toLocaleString();
            document.getElementById('current-brightness').textContent = (currentBrightness * 100).toFixed(1) + '%';
            document.getElementById('session-coherence').textContent = sessionCoherence.toFixed(4);
            
            // Coherence live value
            document.getElementById('coherence-live').textContent = sessionCoherence.toFixed(6);
            
            // Memory weight
            const memWeight = computeMemoryWeight(sessionCoherence, OMEGA_SO2);
            document.getElementById('memory-weight').textContent = memWeight.toFixed(4);
            
            // Rupture count
            document.getElementById('rupture-count').textContent = 
                (displayRuptures + atmRuptures + retinalCycles + gammaCycles).toLocaleString();
        }
        
        // Animate timeline points
        function animateTimeline() {
            const points = document.querySelectorAll('.timeline-point');
            points.forEach((point, i) => {
                const delay = i * 200;
                setTimeout(() => {
                    point.classList.add('active');
                    setTimeout(() => point.classList.remove('active'), 500);
                }, delay);
            });
        }
        
        // Main animation loop
        function animate(timestamp) {
            const t = (Date.now() - startTime) / 1000;  // seconds since start
            const dt = timestamp - (lastFrameTime || timestamp);
            lastFrameTime = timestamp;
            
            // Accumulate coherence
            sessionCoherence += computeCoherence(dt / 1000);
            
            // Display ruptures (60Hz)
            if (t - (lastFrameTime/1000) >= TAU_DISPLAY) {
                displayRuptures++;
            }
            displayRuptures = Math.floor(t / TAU_DISPLAY);
            
            // Atmospheric ruptures (318Hz)
            atmRuptures = Math.floor(t / TAU_ATM);
            
            // Retinal cycles (10Hz)
            retinalCycles = Math.floor(t / TAU_RETINAL);
            
            // Gamma cycles (40Hz)
            gammaCycles = Math.floor(t / TAU_GAMMA);
            
            // Update scintillation
            scintillationPhase += 0.1;
            currentBrightness = computeScintillation(t);
            
            // Draw star with current brightness
            drawSirius(currentBrightness);
            
            // Update displays
            updateDisplays();
            
            requestAnimationFrame(animate);
        }
        
        // Flash effect for live values
        function flashLiveValues() {
            const liveValues = document.querySelectorAll('.live-value');
            liveValues.forEach(el => {
                el.classList.add('flash');
                setTimeout(() => el.classList.remove('flash'), 100);
            });
        }
        
        // Initialize
        createStarField();
        requestAnimationFrame(animate);
        
        // Periodic timeline animation
        setInterval(animateTimeline, 5000);
        
        // Flash live values periodically
        setInterval(flashLiveValues, 500);
        
        // Console output for verification
        console.log('CRR Star Simulation Initialized');
        console.log('Ω (Z₂) = 1/π =', OMEGA_Z2.toFixed(5));
        console.log('Ω (SO(2)) = 1/2π =', OMEGA_SO2.toFixed(5));
        console.log('e^π =', EXP_PI.toFixed(4));
        console.log('Sirius color: RGB(' + SIRIUS_RGB.r + ', ' + SIRIUS_RGB.g + ', ' + SIRIUS_RGB.b + ')');
    </script>
</body>
</html>
