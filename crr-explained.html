<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRR Explained - Cohere.org.uk</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 50%, #f5f6f8 100%); font-family: Georgia, serif; line-height: 1.6; color: #2c2c2c; overflow-x: hidden; }
        .page-container { max-width: 1400px; margin: 0 auto; padding: 0 60px; }
        .header { display: flex; align-items: center; justify-content: space-between; padding: 40px 0; background: rgba(255, 255, 255, 0.9); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(0, 0, 0, 0.05); position: relative; z-index: 100; }
        .logo-section { display: flex; align-items: center; }
        .logo { width: 60px; height: 60px; margin-right: 20px; cursor: pointer; transition: transform 0.3s ease; }
        .logo:hover { transform: scale(1.1); }
        .title-group { display: flex; flex-direction: column; }
        .site-title { font-family: Georgia, serif; font-size: 48px; font-weight: normal; color: #1a1a1a; letter-spacing: -0.5px; margin-bottom: 5px; }
        .strapline { font-family: Georgia, serif; font-size: 18px; font-style: italic; color: #6c757d; letter-spacing: 0.5px; }
        .main-nav { display: flex; align-items: center; gap: 40px; }
        .nav-item { position: relative; }
        .nav-link { font-family: Georgia, serif; font-size: 18px; font-weight: normal; color: #495057; text-decoration: none; padding: 12px 20px; border-radius: 4px; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; white-space: nowrap; }
        .nav-link:hover { background: rgba(74, 144, 226, 0.08); color: #1a1a1a; transform: translateY(-2px); }
        .nav-link.active { background: #4a90e2; color: white; }
        .dropdown-arrow { font-size: 12px; transition: transform 0.3s ease; }
        .nav-item:hover .dropdown-arrow { transform: rotate(180deg); }
        .dropdown-menu { position: absolute; top: 100%; left: 0; background: white; min-width: 220px; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12); border: 1px solid rgba(0, 0, 0, 0.08); border-radius: 8px; padding: 8px 0; opacity: 0; visibility: hidden; transform: translateY(-8px); transition: all 0.25s ease; z-index: 1000; }
        .nav-item:hover .dropdown-menu { opacity: 1; visibility: visible; transform: translateY(0); }
        .dropdown-link { display: block; padding: 12px 20px; color: #495057; text-decoration: none; font-size: 16px; font-family: Georgia, serif; transition: all 0.2s ease; border-left: 3px solid transparent; }
        .dropdown-link:hover { background: rgba(74, 144, 226, 0.08); color: #4a90e2; border-left-color: #4a90e2; }
        .hero-section { padding: 100px 0 80px; text-align: center; position: relative; }
        .hero-background { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: radial-gradient(circle at 20% 80%, rgba(74, 144, 226, 0.03) 0%, transparent 50%), radial-gradient(circle at 80% 20%, rgba(108, 117, 125, 0.03) 0%, transparent 50%); pointer-events: none; }
        .hero-content { position: relative; z-index: 1; }
        .hero-title { font-family: Georgia, serif; font-size: 56px; font-weight: normal; line-height: 1.1; margin-bottom: 30px; color: #1a1a1a; letter-spacing: -1px; }
        .hero-subtitle { font-family: Georgia, serif; font-size: 24px; font-weight: normal; color: #495057; margin-bottom: 40px; line-height: 1.5; max-width: 800px; margin-left: auto; margin-right: auto; }
        .video-section { margin: 60px 0 80px; padding: 50px 60px; background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border: 1px solid rgba(0, 0, 0, 0.05); position: relative; }
        .video-section-background { position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(45deg, rgba(248, 249, 250, 0.5) 0%, transparent 100%); pointer-events: none; }
        .video-section-content { position: relative; z-index: 1; max-width: 1200px; margin: 0 auto; }
        .video-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 30px; margin-top: 30px; }
        .video-item { display: flex; flex-direction: column; gap: 15px; }
        .video-wrapper { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; background: #000; border: 2px solid #e0e0e0; }
        .video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .video-description { font-family: Georgia, serif; font-size: 16px; font-style: italic; color: #495057; text-align: center; line-height: 1.5; }
        .featured-video { margin-bottom: 40px; }
        .featured-video-title { font-family: Georgia, serif; font-size: 28px; font-weight: normal; color: #1a1a1a; text-align: center; margin-bottom: 20px; }
        .featured-video-wrapper { position: relative; padding-bottom: 45%; max-width: 900px; margin: 0 auto; height: 0; overflow: hidden; background: #000; border: 3px solid #4a90e2; box-shadow: 0 8px 32px rgba(74, 144, 226, 0.2); }
        .featured-video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .footer a { color: #4a90e2; text-decoration: none; transition: color 0.2s ease; }
        .footer a:hover { color: #1a1a1a; text-decoration: underline; }
        .entropic-section { margin: 80px 0; background: linear-gradient(135deg, #0a0a14 0%, #12121f 50%, #0a0a14 100%); border: 1px solid rgba(255, 255, 255, 0.1); position: relative; overflow: hidden; }
        .entropic-header { padding: 30px 60px 20px; text-align: center; border-bottom: 1px solid rgba(255, 255, 255, 0.1); }
        .entropic-header h2 { font-family: Georgia, serif; font-size: 36px; font-weight: normal; color: #e8e0f0; letter-spacing: 0.05em; margin-bottom: 8px; }
        .entropic-header p { font-family: Georgia, serif; font-size: 18px; color: rgba(200, 180, 220, 0.7); font-style: italic; }
        .entropic-canvas-container { position: relative; height: 450px; }
        #entropicCanvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; cursor: crosshair; }
        .entropic-controls { padding: 25px 60px; background: rgba(0, 0, 0, 0.4); border-top: 1px solid rgba(255, 255, 255, 0.1); }
        .entropic-slider-container { display: flex; align-items: center; justify-content: center; gap: 1.5rem; margin-bottom: 1rem; }
        .entropic-slider-label { font-family: Georgia, serif; font-size: 1rem; width: 100px; }
        .entropic-slider-label.left { color: rgba(255, 200, 200, 0.9); text-align: right; }
        .entropic-slider-label.right { color: rgba(180, 220, 255, 0.9); text-align: left; }
        .entropic-slider-wrapper { position: relative; width: 350px; }
        .entropic-omega-value { position: absolute; top: -1.8rem; left: 50%; transform: translateX(-50%); color: #fff; font-size: 1rem; font-family: 'JetBrains Mono', monospace; }
        .entropic-slider { width: 100%; height: 10px; border-radius: 5px; appearance: none; cursor: pointer; background: linear-gradient(to right, hsla(340, 70%, 40%, 0.8) 0%, hsla(280, 60%, 50%, 0.8) 50%, hsla(200, 70%, 50%, 0.8) 100%); }
        .entropic-slider::-webkit-slider-thumb { appearance: none; width: 22px; height: 22px; border-radius: 50%; background: #fff; cursor: pointer; box-shadow: 0 0 12px rgba(255, 255, 255, 0.6); }
        .entropic-state-description { text-align: center; margin-bottom: 1rem; }
        .entropic-state-description p { font-family: Georgia, serif; color: rgba(255, 255, 255, 0.8); font-size: 0.95rem; font-style: italic; }
        .entropic-math-context { display: flex; justify-content: center; gap: 3rem; text-align: center; font-size: 0.8rem; color: rgba(255, 255, 255, 0.5); font-family: Georgia, serif; }
        .entropic-math-context .formula { font-family: 'JetBrains Mono', monospace; margin-bottom: 4px; color: rgba(255, 255, 255, 0.7); }
        .dirac-section { margin: 80px 0; background: #fafafa; border: 1px solid #ddd; position: relative; }
        .dirac-header { padding: 40px 60px 30px; text-align: center; border-bottom: 1px solid #eee; }
        .dirac-header h2 { font-family: Georgia, serif; font-size: 36px; font-weight: normal; color: #1a1a1a; letter-spacing: 0.02em; margin-bottom: 10px; }
        .dirac-header p { font-family: Georgia, serif; font-size: 18px; color: #666; font-style: italic; }
        .dirac-content { padding: 40px 60px; }
        .dirac-viz-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 30px; flex-wrap: wrap; gap: 20px; }
        .dirac-equation-display { font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; color: #1a1a1a; background: rgba(204, 68, 68, 0.15); padding: 12px 20px; border-left: 3px solid #c44; }
        .dirac-epsilon-control { display: flex; flex-direction: column; gap: 8px; min-width: 280px; }
        .dirac-epsilon-label { font-family: Georgia, serif; font-size: 0.95rem; color: #666; display: flex; justify-content: space-between; align-items: center; }
        .dirac-epsilon-value { font-family: 'JetBrains Mono', monospace; font-size: 1rem; color: #c44; font-weight: 500; }
        .dirac-slider { -webkit-appearance: none; width: 100%; height: 6px; background: #ddd; border-radius: 3px; outline: none; cursor: pointer; }
        .dirac-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 18px; height: 18px; background: #c44; border-radius: 50%; cursor: pointer; }
        .dirac-canvas-container { position: relative; width: 100%; height: 320px; margin-bottom: 20px; background: white; border: 1px solid #ddd; }
        #diracCanvas { width: 100%; height: 100%; display: block; }
        .dirac-axis-labels { position: absolute; bottom: 8px; left: 0; right: 0; display: flex; justify-content: space-between; padding: 0 60px; font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; color: #999; }
        .dirac-stats-row { display: flex; justify-content: center; gap: 60px; padding: 20px 0; border-top: 1px solid #ddd; flex-wrap: wrap; }
        .dirac-stat { text-align: center; }
        .dirac-stat-label { font-family: Georgia, serif; font-size: 0.85rem; color: #666; margin-bottom: 4px; text-transform: uppercase; letter-spacing: 0.08em; }
        .dirac-stat-value { font-family: 'JetBrains Mono', monospace; font-size: 1.4rem; color: #c44; }
        .dirac-perspectives { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 30px; }
        .dirac-perspective-card { background: white; border: 1px solid #ddd; padding: 25px; }
        .dirac-perspective-card h4 { font-family: Georgia, serif; font-size: 1.2rem; font-weight: normal; margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
        .dirac-perspective-icon { width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.9rem; }
        .dirac-perspective-card.from-outside .dirac-perspective-icon { background: rgba(204, 68, 68, 0.15); color: #c44; }
        .dirac-perspective-card.from-within .dirac-perspective-icon { background: rgba(68, 136, 204, 0.15); color: #48c; }
        .dirac-perspective-card p { font-family: Georgia, serif; color: #666; font-size: 0.95rem; line-height: 1.6; }
        .physiology-section { margin: 80px 0; background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); border: none; position: relative; overflow: hidden; color: white; }
        .physiology-section::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, #e63946 0%, #2a9d8f 50%, #6a4c93 100%); }
        .physiology-header { padding: 50px 60px 30px; text-align: center; }
        .physiology-header h2 { font-family: Georgia, serif; font-size: 42px; font-weight: normal; color: #fff; margin-bottom: 15px; text-shadow: 0 2px 20px rgba(0, 0, 0, 0.3); }
        .physiology-header p { font-family: Georgia, serif; font-size: 20px; color: rgba(255, 255, 255, 0.7); font-style: italic; max-width: 800px; margin: 0 auto; }
        .physiology-main { padding: 0 60px 50px; }
        .organ-viz-container { background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); padding: 30px; margin-bottom: 40px; }
        .organ-viz-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px; }
        .organ-viz-header h3 { font-family: Georgia, serif; font-size: 1.4rem; font-weight: normal; color: rgba(255, 255, 255, 0.9); }
        .viz-controls { display: flex; gap: 10px; }
        .viz-btn { padding: 8px 20px; background: rgba(255, 255, 255, 0.1); color: white; border: 1px solid rgba(255, 255, 255, 0.2); font-family: Georgia, serif; font-size: 0.9rem; cursor: pointer; transition: all 0.2s ease; }
        .viz-btn:hover { background: rgba(255, 255, 255, 0.2); }
        .viz-btn.active { background: #4a90e2; border-color: #4a90e2; }
        .organ-canvas-wrapper { position: relative; height: 450px; background: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.1); }
        #organCanvas { width: 100%; height: 100%; }
        .organ-legend { display: flex; justify-content: center; gap: 40px; margin-top: 20px; flex-wrap: wrap; }
        .legend-item { display: flex; align-items: center; gap: 10px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; color: rgba(255, 255, 255, 0.8); }
        .legend-dot { width: 12px; height: 12px; border-radius: 50%; }
        .param-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; margin-bottom: 40px; }
        .param-card { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); padding: 25px; position: relative; overflow: hidden; }
        .param-card::before { content: ''; position: absolute; top: 0; left: 0; width: 4px; height: 100%; }
        .param-card.heart::before { background: #e63946; }
        .param-card.lung::before { background: #2a9d8f; }
        .param-card.brain::before { background: #6a4c93; }
        .param-card h4 { font-family: Georgia, serif; font-size: 1.3rem; font-weight: normal; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        .param-card.heart h4 { color: #e63946; }
        .param-card.lung h4 { color: #2a9d8f; }
        .param-card.brain h4 { color: #6a4c93; }
        .param-icon { font-size: 1.5rem; }
        .param-list { list-style: none; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; color: rgba(255, 255, 255, 0.7); }
        .param-list li { padding: 6px 0; border-bottom: 1px solid rgba(255, 255, 255, 0.05); display: flex; justify-content: space-between; }
        .param-list li:last-child { border-bottom: none; }
        .param-value { color: rgba(255, 255, 255, 0.9); }
        .param-physiological { font-family: Georgia, serif; font-size: 0.85rem; color: rgba(255, 255, 255, 0.5); font-style: italic; margin-top: 15px; line-height: 1.5; }
        .math-framework { background: rgba(74, 144, 226, 0.1); border: 1px solid rgba(74, 144, 226, 0.3); padding: 35px; margin-bottom: 40px; }
        .math-framework h3 { font-family: Georgia, serif; font-size: 1.5rem; font-weight: normal; color: #fff; text-align: center; margin-bottom: 25px; }
        .equation-row { display: flex; justify-content: center; gap: 50px; flex-wrap: wrap; margin-bottom: 25px; }
        .equation-box { text-align: center; padding: 20px; background: rgba(0, 0, 0, 0.2); min-width: 200px; }
        .equation-box .formula { font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; color: rgba(255, 255, 255, 0.9); margin-bottom: 8px; }
        .equation-box .label { font-family: Georgia, serif; font-size: 0.85rem; color: rgba(255, 255, 255, 0.5); }
        .framework-insight { font-family: Georgia, serif; font-size: 1rem; color: rgba(255, 255, 255, 0.7); text-align: center; max-width: 800px; margin: 0 auto; line-height: 1.7; }
        .rsa-section { background: rgba(42, 157, 143, 0.1); border: 1px solid rgba(42, 157, 143, 0.3); padding: 35px; }
        .rsa-section h3 { font-family: Georgia, serif; font-size: 1.5rem; font-weight: normal; color: #2a9d8f; text-align: center; margin-bottom: 20px; }
        .rsa-content { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: center; }
        .rsa-explanation { font-family: Georgia, serif; font-size: 1rem; color: rgba(255, 255, 255, 0.8); line-height: 1.7; }
        .rsa-equation { text-align: center; padding: 25px; background: rgba(0, 0, 0, 0.2); }
        .rsa-equation .main-eq { font-family: 'JetBrains Mono', monospace; font-size: 1.2rem; color: #2a9d8f; margin-bottom: 15px; }
        .rsa-effects { display: flex; justify-content: center; gap: 30px; font-family: Georgia, serif; font-size: 0.9rem; }
        .rsa-effect { padding: 10px 15px; background: rgba(255, 255, 255, 0.05); }
        .rsa-effect.inspire { color: #e63946; }
        .rsa-effect.expire { color: #4a90e2; }
        .temporal-section { margin: 80px 0; background: linear-gradient(180deg, #050508 0%, #0a0a12 100%); border: none; position: relative; overflow: hidden; color: #e8e4df; }
        .temporal-section::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: linear-gradient(90deg, #d4a574 0%, #7ab8a8 33%, #c97b63 66%, #8b9dc3 100%); }
        .temporal-header { padding: 40px 60px 20px; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .temporal-header h2 { font-family: Georgia, serif; font-size: 42px; font-weight: normal; letter-spacing: 0.1em; background: linear-gradient(135deg, #f4f0eb 0%, #d4a574 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 10px; }
        .temporal-header p { font-family: Georgia, serif; font-size: 18px; font-style: italic; opacity: 0.5; }
        .temporal-main { padding: 30px 60px 50px; }
        .temporal-time-display { display: flex; justify-content: center; align-items: baseline; gap: 0.5rem; margin: 1.5rem 0; }
        .temporal-time-value { font-family: 'JetBrains Mono', monospace; font-size: 3rem; font-weight: 300; color: #d4a574; }
        .temporal-time-unit { font-family: 'JetBrains Mono', monospace; font-size: 1rem; opacity: 0.5; }
        .temporal-time-bar { height: 6px; background: rgba(255,255,255,0.05); border-radius: 3px; margin: 1rem 0 2rem; overflow: hidden; }
        .temporal-time-progress { height: 100%; background: linear-gradient(90deg, #d4a574, #e8c9a0); border-radius: 3px; transition: width 0.05s linear; }
        .temporal-controls { display: flex; justify-content: center; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
        .temporal-btn { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; padding: 0.5rem 1.2rem; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1); color: #e8e4df; border-radius: 5px; cursor: pointer; transition: all 0.3s; text-transform: uppercase; letter-spacing: 0.06em; }
        .temporal-btn:hover { background: rgba(212,165,116,0.15); border-color: rgba(212,165,116,0.3); }
        .temporal-btn.active { background: rgba(212,165,116,0.2); border-color: #d4a574; }
        .temporal-slider-group { display: flex; align-items: center; gap: 0.6rem; padding: 0.5rem 0.8rem; background: rgba(255,255,255,0.02); border-radius: 5px; border: 1px solid rgba(255,255,255,0.05); }
        .temporal-slider-label { font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; opacity: 0.5; }
        .temporal-slider { -webkit-appearance: none; width: 80px; height: 3px; background: rgba(255,255,255,0.1); border-radius: 2px; }
        .temporal-slider::-webkit-slider-thumb { -webkit-appearance: none; width: 12px; height: 12px; background: #d4a574; border-radius: 50%; cursor: pointer; }
        .temporal-slider-value { font-family: 'JetBrains Mono', monospace; font-size: 0.75rem; color: #d4a574; min-width: 35px; }
        .temporal-legend { display: flex; justify-content: center; gap: 2rem; margin: 1rem 0; padding: 0.8rem; background: rgba(255,255,255,0.02); border-radius: 6px; }
        .temporal-legend-item { display: flex; align-items: center; gap: 0.5rem; font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; }
        .temporal-legend-color { width: 12px; height: 12px; border-radius: 2px; }
        .scales-header-row { display: grid; grid-template-columns: 130px 60px 80px 1fr 45px 45px 45px; gap: 8px; padding: 6px 10px; font-family: 'JetBrains Mono', monospace; font-size: 0.6rem; text-transform: uppercase; letter-spacing: 0.05em; opacity: 0.4; margin-bottom: 4px; }
        .scales-header-row span:nth-child(4) { text-align: center; }
        .scales-header-row span:nth-child(n+5) { text-align: center; }
        .scales-container { display: flex; flex-direction: column; gap: 2px; max-height: 600px; overflow-y: auto; }
        .scale-row { display: grid; grid-template-columns: 130px 60px 80px 1fr 45px 45px 45px; gap: 8px; align-items: center; padding: 6px 10px; background: rgba(255,255,255,0.015); border-radius: 4px; transition: background 0.2s; }
        .scale-row:hover { background: rgba(255,255,255,0.03); }
        .scale-row.rupture-active { background: rgba(212,165,116,0.12); }
        .scale-name { font-family: Georgia, serif; font-size: 0.85rem; font-weight: 400; }
        .scale-duration { font-family: 'JetBrains Mono', monospace; font-size: 0.65rem; opacity: 0.4; text-align: right; }
        .cycles-value { font-family: 'JetBrains Mono', monospace; font-size: 0.6rem; opacity: 0.35; text-align: right; }
        .phase-bar { height: 16px; background: rgba(255,255,255,0.05); border-radius: 3px; overflow: hidden; position: relative; }
        .phase-fill { position: absolute; top: 0; left: 0; height: 100%; border-radius: 3px; transition: width 0.05s linear, background 0.2s; }
        .phase-marker { position: absolute; top: 0; width: 2px; height: 100%; background: #fff; box-shadow: 0 0 6px rgba(255,255,255,0.8); z-index: 5; }
        .crr-value { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; text-align: center; }
        .crr-value.coherence { color: #7ab8a8; }
        .crr-value.rupture { color: #c97b63; }
        .crr-value.regen { color: #8b9dc3; }
        .section-divider { margin: 1rem 0; padding: 0.5rem 0; border-top: 1px solid rgba(255,255,255,0.05); }
        .section-label { font-family: 'JetBrains Mono', monospace; font-size: 0.6rem; text-transform: uppercase; letter-spacing: 0.1em; opacity: 0.3; margin-bottom: 0.5rem; }
        .temporal-insight-box { margin-top: 1.5rem; padding: 1.2rem; background: rgba(212,165,116,0.05); border-left: 3px solid rgba(212,165,116,0.4); border-radius: 0 6px 6px 0; }
        .temporal-insight-box p { font-family: Georgia, serif; font-size: 0.9rem; line-height: 1.6; opacity: 0.8; }
        .temporal-equations { margin-top: 1.5rem; padding: 1rem; background: rgba(255,255,255,0.01); border-radius: 6px; border: 1px solid rgba(255,255,255,0.03); }
        .temporal-equation { font-family: 'JetBrains Mono', monospace; font-size: 0.7rem; margin: 0.4rem 0; opacity: 0.4; }
        .temporal-equation span { color: #d4a574; opacity: 1; }
        .footer { background: rgba(245, 246, 248, 0.9); backdrop-filter: blur(10px); border-top: 1px solid rgba(0, 0, 0, 0.05); padding: 50px 0 40px; text-align: center; margin-top: 80px; }
        .footer-content { max-width: 1000px; margin: 0 auto; }
        .copyright { font-family: Georgia, serif; font-size: 16px; color: #1a1a1a; margin-bottom: 15px; line-height: 1.5; }
        .footer-tech-note { font-family: Georgia, serif; font-size: 14px; color: #6c757d; font-style: italic; line-height: 1.4; }
        @media (max-width: 1024px) { .video-grid { grid-template-columns: repeat(2, 1fr); } .param-grid { grid-template-columns: 1fr; } .rsa-content { grid-template-columns: 1fr; } .dirac-perspectives { grid-template-columns: 1fr; } .scale-row, .scales-header-row { grid-template-columns: 90px 45px 60px 1fr 35px 35px 35px; font-size: 0.75rem; } }
        @media (max-width: 768px) { .page-container { padding: 0 30px; } .header { flex-direction: column; gap: 30px; text-align: center; padding: 30px 0; } .logo-section { flex-direction: column; gap: 15px; } .logo { margin-right: 0; } .site-title { font-size: 36px; } .main-nav { flex-wrap: wrap; justify-content: center; gap: 15px; } .hero-section { padding: 60px 0 40px; } .hero-title { font-size: 42px; } .video-grid { grid-template-columns: 1fr; } .entropic-header, .entropic-controls, .dirac-header, .dirac-content, .physiology-header, .physiology-main, .temporal-header, .temporal-main { padding-left: 25px; padding-right: 25px; } }
    </style>
</head>
<body>
    <div class="page-container">
        <header class="header">
            <div class="logo-section">
                <svg class="logo logo-hive" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <defs><radialGradient id="hiveGrad" cx="50%" cy="50%" r="50%"><stop offset="0%" style="stop-color:#8B4513;stop-opacity:0.9" /><stop offset="70%" style="stop-color:#A0522D;stop-opacity:0.8" /><stop offset="100%" style="stop-color:#654321;stop-opacity:0.7" /></radialGradient><radialGradient id="honeyGrad" cx="50%" cy="50%" r="40%"><stop offset="0%" style="stop-color:#FFD700;stop-opacity:0.8" /><stop offset="100%" style="stop-color:#FFA500;stop-opacity:0.6" /></radialGradient></defs>
                    <ellipse cx="50" cy="55" rx="25" ry="30" fill="url(#hiveGrad)" stroke="#654321" stroke-width="1"/><ellipse cx="50" cy="75" rx="6" ry="8" fill="#3D2F1F"/><path d="M30 40 Q50 38 70 40" stroke="#654321" stroke-width="1" fill="none" opacity="0.7"/><path d="M32 50 Q50 48 68 50" stroke="#654321" stroke-width="1" fill="none" opacity="0.7"/><path d="M34 60 Q50 58 66 60" stroke="#654321" stroke-width="1" fill="none" opacity="0.7"/>
                    <g class="logo-interior"><polygon points="45,45 47,43 52,43 54,45 52,47 47,47" fill="url(#honeyGrad)" opacity="0.8"/><polygon points="52,45 54,43 59,43 61,45 59,47 54,47" fill="url(#honeyGrad)" opacity="0.7"/><polygon points="38,45 40,43 45,43 47,45 45,47 40,47" fill="url(#honeyGrad)" opacity="0.9"/><polygon points="41,53 43,51 48,51 50,53 48,55 43,55" fill="url(#honeyGrad)" opacity="0.8"/><polygon points="48,53 50,51 55,51 57,53 55,55 50,55" fill="url(#honeyGrad)" opacity="0.7"/><ellipse class="interior-bee-1" cx="46" cy="46" rx="2" ry="1.5" fill="#FFD700" opacity="0.8"/><ellipse class="interior-bee-2" cx="53" cy="52" rx="2" ry="1.5" fill="#FFD700" opacity="0.9"/></g>
                    <g class="logo-bee bee-1"><ellipse cx="25" cy="35" rx="3" ry="2" fill="#FFD700"/><ellipse cx="24" cy="35" rx="1.5" ry="1" fill="#000000"/><ellipse cx="26" cy="33" rx="2" ry="1" fill="rgba(255,255,255,0.7)"/><ellipse cx="26" cy="37" rx="2" ry="1" fill="rgba(255,255,255,0.7)"/></g>
                    <g class="logo-bee bee-2"><ellipse cx="75" cy="45" rx="3" ry="2" fill="#FFD700"/><ellipse cx="74" cy="45" rx="1.5" ry="1" fill="#000000"/><ellipse cx="76" cy="43" rx="2" ry="1" fill="rgba(255,255,255,0.7)"/><ellipse cx="76" cy="47" rx="2" ry="1" fill="rgba(255,255,255,0.7)"/></g>
                    <g class="logo-bee bee-3"><ellipse cx="40" cy="25" rx="3" ry="2" fill="#FFD700"/><ellipse cx="39" cy="25" rx="1.5" ry="1" fill="#000000"/><ellipse cx="41" cy="23" rx="2" ry="1" fill="rgba(255,255,255,0.7)"/><ellipse cx="41" cy="27" rx="2" ry="1" fill="rgba(255,255,255,0.7)"/></g>
                    <g class="logo-bee bee-4"><ellipse cx="65" cy="25" rx="3" ry="2" fill="#FFD700"/><ellipse cx="64" cy="25" rx="1.5" ry="1" fill="#000000"/><ellipse cx="66" cy="23" rx="2" ry="1" fill="rgba(255,255,255,0.7)"/><ellipse cx="66" cy="27" rx="2" ry="1" fill="rgba(255,255,255,0.7)"/></g>
                </svg>
                <div class="title-group"><h1 class="site-title">Cohere.org.uk</h1><p class="strapline">Made of Maths</p></div>
            </div>
            <nav class="main-nav">
                <div class="nav-item"><a href="index.html" class="nav-link">Home</a></div>
                <div class="nav-item"><a href="crr-simulations.html" class="nav-link">CRR Simulations<span class="dropdown-arrow">‚ñº</span></a><div class="dropdown-menu"><a href="biological-systems.html" class="dropdown-link">Biological Systems</a><a href="physical-systems.html" class="dropdown-link">Physical Systems</a><a href="mathematical-life.html" class="dropdown-link">Mathematical Life</a></div></div>
                <div class="nav-item"><a href="crr-benchmarks.html" class="nav-link">CRR Benchmarks</a></div>
                <div class="nav-item"><a href="crr-explained.html" class="nav-link active">CRR Explained</a></div>
                <div class="nav-item"><a href="about.html" class="nav-link">About</a></div>
            </nav>
        </header>
        <main>
            <section class="hero-section"><div class="hero-background"></div><div class="hero-content"><h2 class="hero-title">Understanding CRR</h2><p class="hero-subtitle">Stability Through Change: Markovian Agents in a Non-Markovian Field</p></div></section>
            <section class="video-section"><div class="video-section-background"></div><div class="video-section-content"><div class="featured-video"><h3 class="featured-video-title">Active Inference Institute: CRR Presentation</h3><div class="featured-video-wrapper"><iframe src="https://www.youtube.com/embed/7yTT2OHzTu0?start=2858" title="Active Inference Institute: CRR Presentation" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></div><div class="video-grid"><div class="video-item"><div class="video-wrapper"><iframe src="https://www.youtube.com/embed/xQ0OVHO8taI" title="Bridging the Gaps" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div><p class="video-description">Exploring CRR in Contemporary Contexts</p></div><div class="video-item"><div class="video-wrapper"><iframe src="https://www.youtube.com/embed/3q7TiYlT0bc" title="The Cave, The Ladder and The Return" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div><p class="video-description">A CRR Philosophical Enquiry</p></div><div class="video-item"><div class="video-wrapper"><iframe src="https://www.youtube.com/embed/GgIEQ5FhyEY" title="The Signatures We Become" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div><p class="video-description">How Memory, Rupture and Renewal Shape Identity</p></div><div class="video-item"><div class="video-wrapper"><iframe src="https://www.youtube.com/embed/bys21DsYloc" title="The Mathematics of Becoming" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div><p class="video-description">A CRR & FEP Lens on Erikson and Piaget</p></div></div></div></section>
            <section class="entropic-section"><div class="entropic-header"><h2>The Entropic Brain</h2><p>CRR Dynamics of Interpersonal Boundary Dissolution</p></div><div class="entropic-canvas-container"><canvas id="entropicCanvas"></canvas></div><div class="entropic-controls"><div class="entropic-slider-container"><span class="entropic-slider-label left">Low Œ©</span><div class="entropic-slider-wrapper"><div class="entropic-omega-value" id="entropicOmegaValue">Œ© = 0.30</div><input type="range" id="entropicOmegaSlider" class="entropic-slider" min="0.1" max="0.95" step="0.01" value="0.3"></div><span class="entropic-slider-label right">High Œ©</span></div><div class="entropic-state-description"><p id="entropicStateDescription">RIGID: Low Œ© ‚Ä¢ High precision ‚Ä¢ Thick Markov blanket ‚Ä¢ Markovian dynamics ‚Ä¢ Attractor-locked</p></div><div class="entropic-math-context"><div><div class="formula">exp(C/Œ©)</div><div>Memory weighting</div></div><div><div class="formula">Low Œ© ‚Üí peaked</div><div>Only recent/strong patterns</div></div><div><div class="formula">High Œ© ‚Üí flat</div><div>Full history accessible</div></div></div></div></section>
            <section class="dirac-section"><div class="dirac-header"><h2>The Anatomy of Rupture</h2><p>How the Dirac delta formalises the moment of transformation in CRR</p></div><div class="dirac-content"><div class="dirac-viz-header"><div class="dirac-equation-display">Œ¥<sub>Œµ</sub>(t) = (1/Œµ‚àöœÄ) ¬∑ exp(‚àít¬≤/Œµ¬≤)</div><div class="dirac-epsilon-control"><div class="dirac-epsilon-label"><span>Timescale of transformation</span><span class="dirac-epsilon-value">Œµ = <span id="diracEpsilonDisplay">0.50</span></span></div><input type="range" id="diracEpsilonSlider" class="dirac-slider" min="0.05" max="1.5" step="0.01" value="0.5"></div></div><div class="dirac-canvas-container"><canvas id="diracCanvas"></canvas><div class="dirac-axis-labels"><span>past</span><span>t‚ÇÄ (rupture)</span><span>future</span></div></div><div class="dirac-stats-row"><div class="dirac-stat"><div class="dirac-stat-label">Peak Height</div><div class="dirac-stat-value" id="diracPeakHeight">1.13</div></div><div class="dirac-stat"><div class="dirac-stat-label">Area Under Curve</div><div class="dirac-stat-value" id="diracAreaValue">‚âà 1.00</div></div><div class="dirac-stat"><div class="dirac-stat-label">Duration (FWHM)</div><div class="dirac-stat-value" id="diracDurationValue">0.83</div></div></div><div class="dirac-perspectives"><div class="dirac-perspective-card from-outside"><h4><span class="dirac-perspective-icon">‚óâ</span> From Outside</h4><p>From sufficient distance‚Äîacross years, from another's view, in historical retrospect‚Äîthe rupture appears as a point. A crisis, a revelation, a death: discrete moments marking before and after.</p></div><div class="dirac-perspective-card from-within"><h4><span class="dirac-perspective-icon">‚óé</span> From Within</h4><p>From inside the transformation, there is always duration: confusion, processing, the slow dawn of reorganisation. What seems instantaneous contains worlds of felt time.</p></div></div></div></section>
            <section class="physiology-section"><div class="physiology-header"><h2>One Framework, Three Organs</h2><p>Heart, lungs, and brain share identical mathematical structure with organ-specific parameters</p></div><div class="physiology-main"><div class="organ-viz-container"><div class="organ-viz-header"><h3>Coupled CRR Oscillators: Real-Time Simulation</h3><div class="viz-controls"><button class="viz-btn active" id="playPauseBtn">‚ñ∂ Running</button><button class="viz-btn" id="resetBtn">‚Ü∫ Reset</button><button class="viz-btn" id="couplingBtn">RSA: ON</button></div></div><div class="organ-canvas-wrapper"><canvas id="organCanvas"></canvas></div><div class="organ-legend"><div class="legend-item"><div class="legend-dot" style="background: #e63946;"></div>Cardiac (ECG) ~75 bpm</div><div class="legend-item"><div class="legend-dot" style="background: #2a9d8f;"></div>Respiratory ~15/min</div><div class="legend-item"><div class="legend-dot" style="background: #6a4c93;"></div>Neural (Alpha) ~10 Hz</div></div></div><div class="param-grid"><div class="param-card heart"><h4><span class="param-icon">‚ù§Ô∏è</span> Cardiac</h4><ul class="param-list"><li><span>œÑ<sub>accumulate</sub></span><span class="param-value">600 ms</span></li><li><span>œÑ<sub>rupture</sub></span><span class="param-value">5 ms</span></li><li><span>œÑ<sub>refractory</sub></span><span class="param-value">200 ms</span></li><li><span>Period</span><span class="param-value">~805 ms</span></li></ul><p class="param-physiological">C = membrane potential via I<sub>f</sub> + Ca¬≤‚Å∫<br>Œ© ‚âà ‚àí40mV threshold<br>Œ¥ = action potential upstroke</p></div><div class="param-card lung"><h4><span class="param-icon">ü´Å</span> Respiratory</h4><ul class="param-list"><li><span>œÑ<sub>accumulate</sub></span><span class="param-value">2500 ms</span></li><li><span>œÑ<sub>rupture</sub></span><span class="param-value">100 ms</span></li><li><span>œÑ<sub>refractory</sub></span><span class="param-value">1500 ms</span></li><li><span>Period</span><span class="param-value">~4100 ms</span></li></ul><p class="param-physiological">C = CO‚ÇÇ/H‚Å∫ chemoreceptor signal<br>Œ© = inspiratory neuron threshold<br>Œ¥ = diaphragm contraction onset</p></div><div class="param-card brain"><h4><span class="param-icon">üß†</span> Neural (Alpha)</h4><ul class="param-list"><li><span>œÑ<sub>accumulate</sub></span><span class="param-value">70 ms</span></li><li><span>œÑ<sub>rupture</sub></span><span class="param-value">5 ms</span></li><li><span>œÑ<sub>refractory</sub></span><span class="param-value">25 ms</span></li><li><span>Period</span><span class="param-value">~100 ms</span></li></ul><p class="param-physiological">C = EPSP summation<br>Œ© = population burst threshold<br>Œ¥ = synchronous neural discharge</p></div></div><div class="math-framework"><h3>The Unified Mathematical Structure</h3><div class="equation-row"><div class="equation-box"><div class="formula">C(t) = ‚à´‚ÇÄ·µó L(x,œÑ) dœÑ</div><div class="label">Coherence Accumulation</div></div><div class="equation-box"><div class="formula">Œ¥(t‚ÇÄ) when C = Œ©</div><div class="label">Threshold Rupture</div></div><div class="equation-box"><div class="formula">R = ‚à´ œÜ¬∑exp(C/Œ©)¬∑Œò dœÑ</div><div class="label">Memory-Weighted Regeneration</div></div></div><p class="framework-insight">Each organ system implements the same C ‚Üí Œ¥ ‚Üí R cycle. The coherence density L(x,t) differs‚Äîmembrane currents, chemoreceptor signals, synaptic input‚Äîbut the <em>structure</em> is invariant. This isn't analogy; it's mathematical identity with organ-specific parameterisation.</p></div><div class="rsa-section"><h3>Emergent Coupling: Respiratory Sinus Arrhythmia</h3><div class="rsa-content"><div class="rsa-explanation"><p>When CRR oscillators are coupled, cross-system modulation emerges naturally. The respiratory system modulates the cardiac threshold Œ© through vagal tone:</p><p style="margin-top: 15px;">During <strong>inspiration</strong>, vagal withdrawal increases Œ©<sub>heart</sub>, accelerating coherence accumulation and raising heart rate. During <strong>expiration</strong>, restored vagal tone decreases Œ©<sub>heart</sub>, slowing the heart.</p><p style="margin-top: 15px;">This is <em>not</em> added as an external rule‚Äîit emerges from the natural Œ©-modulation between coupled CRR systems.</p></div><div class="rsa-equation"><div class="main-eq">Œ©<sub>heart</sub>(t) = Œ©‚ÇÄ ¬∑ [1 + Œµ ¬∑ Œ¶<sub>lung</sub>(t)]</div><div class="rsa-effects"><div class="rsa-effect inspire">Inspiration ‚Üí ‚ÜëŒ© ‚Üí ‚ÜëHR</div><div class="rsa-effect expire">Expiration ‚Üí ‚ÜìŒ© ‚Üí ‚ÜìHR</div></div></div></div></div></div></section>
            <section class="temporal-section"><div class="temporal-header"><h2>One Second</h2><p>CRR temporal grammar across 44 orders of magnitude</p></div><div class="temporal-main"><div class="temporal-time-display"><span class="temporal-time-value" id="temporalTimeValue">0.000</span><span class="temporal-time-unit">seconds</span></div><div class="temporal-time-bar"><div class="temporal-time-progress" id="temporalTimeProgress"></div></div><div class="temporal-controls"><button class="temporal-btn active" id="temporalPlayPause">‚ñ∂ Play</button><button class="temporal-btn" id="temporalReset">‚Ü∫ Reset</button><div class="temporal-slider-group"><span class="temporal-slider-label">Œ©</span><input type="range" class="temporal-slider" id="temporalOmega" min="0.1" max="1.0" step="0.01" value="0.318"><span class="temporal-slider-value" id="temporalOmegaValue">0.318</span></div><div class="temporal-slider-group"><span class="temporal-slider-label">Duration</span><input type="range" class="temporal-slider" id="temporalDuration" min="30" max="120" step="5" value="60"><span class="temporal-slider-value" id="temporalDurationValue">60s</span></div></div><div class="temporal-legend"><div class="temporal-legend-item"><div class="temporal-legend-color" style="background: #7ab8a8;"></div><span>C Coherence</span></div><div class="temporal-legend-item"><div class="temporal-legend-color" style="background: #c97b63;"></div><span>Œ¥ Rupture</span></div><div class="temporal-legend-item"><div class="temporal-legend-color" style="background: #8b9dc3;"></div><span>R Regeneration</span></div></div><div class="scales-header-row"><span>Scale</span><span style="text-align:right">Duration</span><span style="text-align:right">Cycles/sec</span><span>Phase Progress</span><span>C</span><span>Œ¥</span><span>R</span></div><div class="scales-container" id="scalesContainer"></div><div class="temporal-insight-box"><p><strong>Scale invariance:</strong> The same C‚ÜíŒ¥‚ÜíR grammar operates from conscious experience (1s) down to Planck time (10‚Åª‚Å¥‚Å¥s). The "Cycles/sec" column shows actual frequency‚ÄîPlanck scale events occur 10‚Å¥¬≥ times per second. Visual animation uses logarithmic scaling so all scales remain visible. Rupture events at each scale become the atoms from which coherence builds above.</p></div><div class="temporal-equations"><div class="temporal-equation"><span>C(t)</span> = ‚à´L(œÑ)dœÑ ‚Äî Coherence integrates local process</div><div class="temporal-equation"><span>Œ¥(now)</span> ‚Äî Rupture at phase boundary</div><div class="temporal-equation"><span>R</span> = ‚à´œÜ¬∑exp(C/Œ©)dœÑ ‚Äî Memory through transformation</div><div class="temporal-equation"><span>Œ© = 1/œÄ ‚âà 0.318</span> ‚Äî Scale-invariant temperature</div></div></div></section>
        </main>
    </div>
    <footer class="footer"><div class="page-container"><div class="footer-content"><p class="copyright"><a href="mailto:Alexander@cohere.org.uk">Alexander@cohere.org.uk</a> ¬∑ <a href="https://github.com/alexsabine/CRR/" target="_blank">GitHub Repository</a></p><p class="footer-tech-note">Note: These simulations utilise HTML5 Canvas and advanced JavaScript. Desktop browsers recommended for optimal performance.</p></div></div></footer>
    <script>
        'use strict';

        // ============================================
        // ECG WAVEFORM GENERATOR - Realistic PQRST
        // ============================================
        function generateECGPoint(phase) {
            const baseline = 0.18;
            let value = baseline;
            
            // P wave (atrial depolarization)
            if (phase >= 0.10 && phase < 0.18) {
                const pPhase = (phase - 0.10) / 0.08;
                value = baseline + 0.08 * Math.sin(pPhase * Math.PI);
            }
            // PR segment
            else if (phase >= 0.18 && phase < 0.22) {
                value = baseline;
            }
            // Q wave (small dip)
            else if (phase >= 0.22 && phase < 0.24) {
                const qPhase = (phase - 0.22) / 0.02;
                value = baseline - 0.06 * Math.sin(qPhase * Math.PI);
            }
            // R wave (tall spike) - THE RUPTURE
            else if (phase >= 0.24 && phase < 0.28) {
                const rPhase = (phase - 0.24) / 0.04;
                value = baseline + 0.75 * Math.sin(rPhase * Math.PI);
            }
            // S wave (downward)
            else if (phase >= 0.28 && phase < 0.31) {
                const sPhase = (phase - 0.28) / 0.03;
                value = baseline - 0.12 * Math.sin(sPhase * Math.PI);
            }
            // ST segment
            else if (phase >= 0.31 && phase < 0.40) {
                value = baseline + 0.02;
            }
            // T wave (repolarization)
            else if (phase >= 0.40 && phase < 0.55) {
                const tPhase = (phase - 0.40) / 0.15;
                value = baseline + 0.18 * Math.sin(tPhase * Math.PI);
            }
            return value;
        }

        // ============================================
        // CRR OSCILLATOR CLASS
        // ============================================
        class CRROscillator {
            constructor(params) { this.params = params; this.reset(); }
            reset() { this.coherence = 0; this.phase = 'accumulate'; this.phaseTime = 0; this.output = this.params.baseline; this.cyclePhase = 0; }
            step(dt, omegaMod = 1.0) {
                const p = this.params;
                const totalPeriod = p.tauAccumulate + p.tauRupture + p.tauRefractory;
                this.cyclePhase += dt / totalPeriod;
                if (this.cyclePhase >= 1) this.cyclePhase -= 1;
                const effectiveOmega = p.omega * omegaMod;
                if (this.phase === 'accumulate') {
                    this.coherence += (effectiveOmega - this.coherence) * dt / p.tauAccumulate;
                    this.output = p.baseline + (p.amplitude - p.baseline) * Math.pow(this.coherence / effectiveOmega, 2);
                    if (this.coherence >= effectiveOmega * 0.98) { this.phase = 'rupture'; this.phaseTime = 0; }
                } else if (this.phase === 'rupture') {
                    this.phaseTime += dt;
                    this.output = p.amplitude;
                    if (this.phaseTime >= p.tauRupture) { this.phase = 'refractory'; this.phaseTime = 0; }
                } else {
                    this.phaseTime += dt;
                    const progress = this.phaseTime / p.tauRefractory;
                    this.output = p.baseline + (p.amplitude - p.baseline) * Math.exp(-3 * progress);
                    this.coherence *= (1 - dt / p.tauRefractory);
                    if (this.phaseTime >= p.tauRefractory) { this.phase = 'accumulate'; this.coherence = p.baseline * p.omega; }
                }
                return this.output;
            }
        }

        // ============================================
        // CARDIAC ECG OSCILLATOR
        // ============================================
        class CardiacECGOscillator {
            constructor() { this.period = 805; this.cycleTime = 0; this.phase = 'diastole'; }
            reset() { this.cycleTime = 0; this.phase = 'diastole'; }
            step(dt, omegaMod = 1.0) {
                const effectivePeriod = this.period / omegaMod;
                this.cycleTime += dt;
                if (this.cycleTime >= effectivePeriod) this.cycleTime -= effectivePeriod;
                const cyclePhase = this.cycleTime / effectivePeriod;
                if (cyclePhase >= 0.24 && cyclePhase < 0.31) this.phase = 'rupture';
                else if (cyclePhase >= 0.55) this.phase = 'accumulate';
                else this.phase = 'refractory';
                return generateECGPoint(cyclePhase);
            }
        }

        // ============================================
        // UNIFIED PHYSIOLOGY VISUALIZATION
        // ============================================
        const PhysiologyViz = {
            canvas: null, ctx: null, isRunning: true, rsaEnabled: true,
            time: 0, dt: 16,
            heartHistory: [], lungHistory: [], brainHistory: [],
            maxHistory: 800,
            heart: null, lung: null, brain: null,

            init() {
                this.canvas = document.getElementById('organCanvas');
                if (!this.canvas) return;
                this.ctx = this.canvas.getContext('2d');
                this.handleResize();
                this.heart = new CardiacECGOscillator();
                this.lung = new CRROscillator({ omega: 1.0, tauAccumulate: 2500, tauRupture: 100, tauRefractory: 1500, baseline: 0.05, amplitude: 1.0 });
                this.brain = new CRROscillator({ omega: 1.0, tauAccumulate: 70, tauRupture: 5, tauRefractory: 25, baseline: 0.15, amplitude: 1.0 });
                this.setupControls();
                window.addEventListener('resize', () => this.handleResize());
                this.animate();
            },

            handleResize() {
                const container = this.canvas.parentElement;
                this.canvas.width = container.clientWidth;
                this.canvas.height = container.clientHeight;
            },

            setupControls() {
                const playBtn = document.getElementById('playPauseBtn');
                const resetBtn = document.getElementById('resetBtn');
                const couplingBtn = document.getElementById('couplingBtn');
                if (playBtn) playBtn.addEventListener('click', () => { this.isRunning = !this.isRunning; playBtn.textContent = this.isRunning ? '‚ñ∂ Running' : '‚è∏ Paused'; playBtn.classList.toggle('active', this.isRunning); });
                if (resetBtn) resetBtn.addEventListener('click', () => { this.heart.reset(); this.lung.reset(); this.brain.reset(); this.heartHistory = []; this.lungHistory = []; this.brainHistory = []; this.time = 0; });
                if (couplingBtn) couplingBtn.addEventListener('click', () => { this.rsaEnabled = !this.rsaEnabled; couplingBtn.textContent = `RSA: ${this.rsaEnabled ? 'ON' : 'OFF'}`; couplingBtn.classList.toggle('active', this.rsaEnabled); });
            },

            animate() {
                if (!this.canvas) return;
                const width = this.canvas.width, height = this.canvas.height;
                if (this.isRunning) {
                    let heartOmegaMod = 1.0;
                    if (this.rsaEnabled) {
                        if (this.lung.phase === 'accumulate') heartOmegaMod = 1.0 + 0.15 * (this.lung.coherence / this.lung.params.omega);
                        else if (this.lung.phase === 'rupture') heartOmegaMod = 1.15;
                        else heartOmegaMod = 1.0 + 0.075 * (1.0 - this.lung.phaseTime / this.lung.params.tauRefractory);
                    }
                    const heartVal = this.heart.step(this.dt, heartOmegaMod);
                    const lungVal = this.lung.step(this.dt);
                    const brainVal = this.brain.step(this.dt);
                    this.heartHistory.push({ val: heartVal, phase: this.heart.phase });
                    this.lungHistory.push({ val: lungVal, phase: this.lung.phase });
                    this.brainHistory.push({ val: brainVal, phase: this.brain.phase });
                    if (this.heartHistory.length > this.maxHistory) { this.heartHistory.shift(); this.lungHistory.shift(); this.brainHistory.shift(); }
                    this.time += this.dt;
                }
                this.ctx.fillStyle = 'rgba(15, 20, 35, 0.12)';
                this.ctx.fillRect(0, 0, width, height);
                const margin = { top: 30, right: 40, bottom: 30, left: 70 };
                const plotW = width - margin.left - margin.right;
                const rowH = (height - margin.top - margin.bottom) / 3;

                const drawTrace = (history, yOffset, color, label, currentPhase, isECG = false) => {
                    if (history.length < 2) return;
                    const y0 = margin.top + yOffset, h = rowH - 10;
                    this.ctx.fillStyle = 'rgba(255, 255, 255, 0.02)';
                    this.ctx.fillRect(margin.left, y0, plotW, h);
                    if (isECG) {
                        this.ctx.strokeStyle = 'rgba(230, 57, 70, 0.08)';
                        this.ctx.lineWidth = 0.5;
                        for (let i = 0; i <= 20; i++) { const x = margin.left + (i / 20) * plotW; this.ctx.beginPath(); this.ctx.moveTo(x, y0); this.ctx.lineTo(x, y0 + h); this.ctx.stroke(); }
                        for (let i = 0; i <= 8; i++) { const y = y0 + (i / 8) * h; this.ctx.beginPath(); this.ctx.moveTo(margin.left, y); this.ctx.lineTo(margin.left + plotW, y); this.ctx.stroke(); }
                    }
                    this.ctx.strokeStyle = color;
                    this.ctx.lineWidth = isECG ? 2.5 : 2;
                    this.ctx.beginPath();
                    for (let i = 0; i < history.length; i++) {
                        const x = margin.left + (i / this.maxHistory) * plotW;
                        const val = typeof history[i] === 'object' ? history[i].val : history[i];
                        const yVal = y0 + h - val * (h - 10) - 5;
                        i === 0 ? this.ctx.moveTo(x, yVal) : this.ctx.lineTo(x, yVal);
                    }
                    this.ctx.stroke();
                    if (history.length > 0) {
                        const lastItem = history[history.length - 1];
                        const lastVal = typeof lastItem === 'object' ? lastItem.val : lastItem;
                        const lastX = margin.left + ((history.length - 1) / this.maxHistory) * plotW;
                        const lastY = y0 + h - lastVal * (h - 10) - 5;
                        if (currentPhase === 'rupture') {
                            const gradient = this.ctx.createRadialGradient(lastX, lastY, 0, lastX, lastY, 25);
                            gradient.addColorStop(0, color + '90');
                            gradient.addColorStop(1, 'transparent');
                            this.ctx.fillStyle = gradient;
                            this.ctx.beginPath();
                            this.ctx.arc(lastX, lastY, 25, 0, Math.PI * 2);
                            this.ctx.fill();
                        }
                        this.ctx.fillStyle = color;
                        this.ctx.beginPath();
                        this.ctx.arc(lastX, lastY, 5, 0, Math.PI * 2);
                        this.ctx.fill();
                        this.ctx.fillStyle = '#fff';
                        this.ctx.beginPath();
                        this.ctx.arc(lastX, lastY, 2, 0, Math.PI * 2);
                        this.ctx.fill();
                    }
                    this.ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
                    this.ctx.font = '12px "JetBrains Mono", monospace';
                    this.ctx.textAlign = 'right';
                    this.ctx.fillText(label, margin.left - 10, y0 + h / 2 + 4);
                    const phaseColors = { accumulate: '#4a90e2', rupture: '#e94560', refractory: '#2a9d8f', diastole: '#4a90e2' };
                    const phaseLabels = { accumulate: 'C', rupture: 'Œ¥', refractory: 'R', diastole: 'C' };
                    this.ctx.fillStyle = phaseColors[currentPhase] || '#fff';
                    this.ctx.textAlign = 'left';
                    this.ctx.font = 'bold 14px "JetBrains Mono", monospace';
                    this.ctx.fillText(phaseLabels[currentPhase] || '', width - margin.right + 10, y0 + h / 2 + 4);
                };

                drawTrace(this.heartHistory, 0, '#e63946', 'ECG', this.heart.phase, true);
                drawTrace(this.lungHistory, rowH, '#2a9d8f', 'Resp', this.lung.phase);
                drawTrace(this.brainHistory, rowH * 2, '#6a4c93', 'EEG', this.brain.phase);
                this.ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
                this.ctx.font = '11px "JetBrains Mono", monospace';
                this.ctx.textAlign = 'center';
                this.ctx.fillText(`${(this.time / 1000).toFixed(1)}s`, width / 2, height - 10);
                requestAnimationFrame(() => this.animate());
            }
        };

        // ============================================
        // ENTROPIC BRAIN VISUALIZATION
        // ============================================
        const EntropicBrain = {
            omega: 0.3, time: 0, leftParticles: [], rightParticles: [], sharedParticles: [], canvas: null, ctx: null,
            init() {
                this.canvas = document.getElementById('entropicCanvas');
                if (!this.canvas) return;
                this.ctx = this.canvas.getContext('2d');
                this.handleResize();
                this.setupControls();
                window.addEventListener('resize', () => this.handleResize());
                this.animate();
            },
            handleResize() {
                const container = this.canvas.parentElement;
                this.canvas.width = container.clientWidth;
                this.canvas.height = container.clientHeight;
                this.initParticles();
            },
            initParticles() {
                const width = this.canvas.width, height = this.canvas.height;
                const leftCenter = { x: width * 0.28, y: height * 0.5 }, rightCenter = { x: width * 0.72, y: height * 0.5 };
                const baseRadius = Math.min(width, height) * 0.18;
                this.leftParticles = []; this.rightParticles = []; this.sharedParticles = [];
                for (let layer = 0; layer < 5; layer++) {
                    const depth = layer / 4, layerRadius = baseRadius * (1 - depth * 0.3), count = 25 - layer * 4;
                    for (let i = 0; i < count; i++) {
                        this.leftParticles.push({ x: leftCenter.x + (Math.random() - 0.5) * layerRadius, y: leftCenter.y + (Math.random() - 0.5) * layerRadius, vx: (Math.random() - 0.5) * 0.5, vy: (Math.random() - 0.5) * 0.5, radius: Math.random() * 3 + 1, depth, phase: Math.random() * Math.PI * 2, hue: 340 + Math.random() * 40 });
                        this.rightParticles.push({ x: rightCenter.x + (Math.random() - 0.5) * layerRadius, y: rightCenter.y + (Math.random() - 0.5) * layerRadius, vx: (Math.random() - 0.5) * 0.5, vy: (Math.random() - 0.5) * 0.5, radius: Math.random() * 3 + 1, depth, phase: Math.random() * Math.PI * 2, hue: 180 + Math.random() * 60 });
                    }
                }
                for (let i = 0; i < 30; i++) this.sharedParticles.push({ x: width * 0.5, y: height * 0.5, radius: Math.random() * 4 + 2, phase: Math.random() * Math.PI * 2, birth: Math.random() });
            },
            setupControls() {
                const slider = document.getElementById('entropicOmegaSlider');
                if (slider) slider.addEventListener('input', (e) => {
                    this.omega = parseFloat(e.target.value);
                    const display = document.getElementById('entropicOmegaValue');
                    const desc = document.getElementById('entropicStateDescription');
                    if (display) { display.style.left = `${((this.omega - 0.1) / 0.85) * 100}%`; display.textContent = `Œ© = ${this.omega.toFixed(2)}`; }
                    if (desc) desc.textContent = this.omega < 0.25 ? "RIGID: Low Œ© ‚Ä¢ High precision ‚Ä¢ Thick Markov blanket ‚Ä¢ Markovian dynamics ‚Ä¢ Attractor-locked" : this.omega < 0.5 ? "DEFENDED: Moderate Œ© ‚Ä¢ Partial historical access ‚Ä¢ Habitual patterns dominate" : this.omega < 0.75 ? "POROUS: Higher Œ© ‚Ä¢ Non-Markovian ‚Ä¢ Deeper memory accessible ‚Ä¢ Boundaries softening" : "FLUID: High Œ© ‚Ä¢ Entropic brain state ‚Ä¢ Full historical access ‚Ä¢ Shared state space emerges";
                });
            },
            animate() {
                if (!this.canvas) return;
                const width = this.canvas.width, height = this.canvas.height;
                this.time += 0.016;
                this.ctx.fillStyle = `rgba(8, 8, 18, ${0.08 + (1 - this.omega) * 0.15})`;
                this.ctx.fillRect(0, 0, width, height);
                const leftCenter = { x: width * 0.28, y: height * 0.5 }, rightCenter = { x: width * 0.72, y: height * 0.5 };
                const baseRadius = Math.min(width, height) * 0.18;
                const gradient = this.ctx.createLinearGradient(leftCenter.x, 0, rightCenter.x, 0);
                gradient.addColorStop(0, `hsla(340, 80%, 50%, ${this.omega * 0.12})`);
                gradient.addColorStop(0.5, `hsla(280, 70%, 40%, ${this.omega * 0.4})`);
                gradient.addColorStop(1, `hsla(200, 80%, 50%, ${this.omega * 0.12})`);
                this.ctx.fillStyle = gradient;
                this.ctx.fillRect(width * 0.3, height * 0.2, width * 0.4, height * 0.6);
                const drawIsland = (particles, center, isLeft) => {
                    particles.forEach((p) => {
                        const depthAccess = Math.exp(-p.depth * (1 - this.omega) * 5);
                        if (Math.random() > depthAccess && p.depth > 0.3) return;
                        p.vx += (Math.random() - 0.5) * this.omega * 0.2 + (center.x - p.x) * ((1 - this.omega) * 0.05 + 0.01);
                        p.vy += (Math.random() - 0.5) * this.omega * 0.2 + (center.y - p.y) * ((1 - this.omega) * 0.05 + 0.01);
                        if (this.omega > 0.5) { const other = isLeft ? rightCenter : leftCenter; p.vx += (other.x - p.x) * (this.omega - 0.5) * 0.01 * (1 - p.depth); p.vy += (other.y - p.y) * (this.omega - 0.5) * 0.01 * (1 - p.depth); }
                        p.vx *= 0.95; p.vy *= 0.95; p.x += p.vx; p.y += p.vy;
                        const size = p.radius * (Math.sin(this.time * 2 + p.phase) * 0.3 + 1) * (1 + this.omega * 0.5) * depthAccess;
                        this.ctx.beginPath(); this.ctx.arc(p.x, p.y, size, 0, Math.PI * 2);
                        this.ctx.fillStyle = `hsla(${p.hue + Math.sin(this.time + p.phase) * this.omega * 30}, ${70 + this.omega * 20}%, ${50 + p.depth * 20}%, ${0.7 * depthAccess})`;
                        this.ctx.fill();
                    });
                };
                drawIsland(this.leftParticles, leftCenter, true);
                drawIsland(this.rightParticles, rightCenter, false);
                if (this.omega > 0.5) {
                    const intensity = (this.omega - 0.5) / 0.5;
                    this.sharedParticles.forEach((p, idx) => {
                        if (p.birth > intensity) return;
                        p.phase += 0.02;
                        const midX = width * 0.5, midY = height * 0.5, r = 50 + intensity * 100;
                        p.x += (midX + Math.cos(p.phase + idx * 0.5) * r - p.x) * 0.05;
                        p.y += (midY + Math.sin(p.phase * 1.3 + idx * 0.3) * r * 0.6 - p.y) * 0.05;
                        this.ctx.beginPath(); this.ctx.arc(p.x, p.y, p.radius * intensity * 1.5, 0, Math.PI * 2);
                        this.ctx.fillStyle = `hsla(${280 + Math.sin(this.time + idx) * 40}, 80%, 60%, ${intensity * 0.8})`;
                        this.ctx.fill();
                    });
                }
                if (this.omega < 0.8) {
                    [[leftCenter, 340], [rightCenter, 200]].forEach(([center, hue]) => {
                        const breathe = Math.sin(this.time * 0.8) * 5, r = baseRadius + breathe;
                        const thickness = (1 - this.omega) * 40 + 5, opacity = (1 - this.omega) * 0.8 + 0.1;
                        for (let i = 0; i < 3; i++) { this.ctx.beginPath(); this.ctx.arc(center.x, center.y, r + i * thickness / 3, 0, Math.PI * 2); this.ctx.strokeStyle = `hsla(${hue}, 60%, 50%, ${opacity * (1 - i * 0.3)})`; this.ctx.lineWidth = thickness / 3; this.ctx.stroke(); }
                    });
                }
                this.ctx.font = '14px Georgia, serif'; this.ctx.textAlign = 'center'; this.ctx.fillStyle = `rgba(255, 255, 255, ${0.5 + this.omega * 0.3})`;
                this.ctx.fillText('Observer A', leftCenter.x, height * 0.85); this.ctx.fillText('Observer B', rightCenter.x, height * 0.85);
                if (this.omega > 0.5) { this.ctx.fillStyle = `rgba(255, 255, 255, ${(this.omega - 0.5) * 1.5})`; this.ctx.fillText('Shared State Space', width * 0.5, height * 0.15); }
                requestAnimationFrame(() => this.animate());
            }
        };

        // ============================================
        // DIRAC DELTA VISUALIZATION
        // ============================================
        const DiracDelta = {
            epsilon: 0.5,
            gaussianDelta(t, eps) { return (1 / (eps * Math.sqrt(Math.PI))) * Math.exp(-(t * t) / (eps * eps)); },
            setupCanvas(canvas) { const rect = canvas.getBoundingClientRect(), dpr = window.devicePixelRatio || 1; canvas.width = rect.width * dpr; canvas.height = rect.height * dpr; const ctx = canvas.getContext('2d'); ctx.scale(dpr, dpr); return { ctx, width: rect.width, height: rect.height }; },
            init() {
                const slider = document.getElementById('diracEpsilonSlider');
                if (!slider) return;
                slider.addEventListener('input', (e) => { this.epsilon = parseFloat(e.target.value); this.updateDisplay(); this.drawMain(); });
                this.drawMain();
                window.addEventListener('resize', () => this.drawMain());
            },
            updateDisplay() {
                const d = document.getElementById('diracEpsilonDisplay'), p = document.getElementById('diracPeakHeight'), dur = document.getElementById('diracDurationValue');
                if (d) d.textContent = this.epsilon.toFixed(2);
                if (p) p.textContent = this.gaussianDelta(0, this.epsilon).toFixed(2);
                if (dur) dur.textContent = (this.epsilon * 2 * Math.sqrt(Math.log(2))).toFixed(2);
            },
            drawMain() {
                const canvas = document.getElementById('diracCanvas'); if (!canvas) return;
                const { ctx, width, height } = this.setupCanvas(canvas);
                const margin = { top: 30, right: 60, bottom: 50, left: 60 }, plotW = width - margin.left - margin.right, plotH = height - margin.top - margin.bottom;
                ctx.fillStyle = '#fff'; ctx.fillRect(0, 0, width, height);
                const tMin = -3, tMax = 3, peak = this.gaussianDelta(0, this.epsilon), yMax = Math.max(peak * 1.15, 2);
                const scaleX = t => margin.left + ((t - tMin) / (tMax - tMin)) * plotW, scaleY = y => margin.top + (1 - y / yMax) * plotH;
                ctx.strokeStyle = '#f0f0f0'; ctx.lineWidth = 1;
                for (let t = -3; t <= 3; t++) { ctx.beginPath(); ctx.moveTo(scaleX(t), margin.top); ctx.lineTo(scaleX(t), height - margin.bottom); ctx.stroke(); }
                ctx.strokeStyle = '#ddd'; ctx.lineWidth = 1.5; ctx.beginPath(); ctx.moveTo(margin.left, scaleY(0)); ctx.lineTo(width - margin.right, scaleY(0)); ctx.stroke();
                ctx.fillStyle = 'rgba(204, 68, 68, 0.08)'; ctx.beginPath(); ctx.moveTo(scaleX(tMin), scaleY(0));
                for (let t = tMin; t <= tMax; t += 0.02) ctx.lineTo(scaleX(t), scaleY(this.gaussianDelta(t, this.epsilon)));
                ctx.lineTo(scaleX(tMax), scaleY(0)); ctx.closePath(); ctx.fill();
                ctx.strokeStyle = '#c44'; ctx.lineWidth = 3; ctx.beginPath();
                for (let t = tMin, first = true; t <= tMax; t += 0.02) { const y = this.gaussianDelta(t, this.epsilon); first ? (ctx.moveTo(scaleX(t), scaleY(y)), first = false) : ctx.lineTo(scaleX(t), scaleY(y)); }
                ctx.stroke();
                ctx.fillStyle = '#c44'; ctx.beginPath(); ctx.arc(scaleX(0), scaleY(peak), 6, 0, Math.PI * 2); ctx.fill();
                ctx.fillStyle = '#fff'; ctx.beginPath(); ctx.arc(scaleX(0), scaleY(peak), 3, 0, Math.PI * 2); ctx.fill();
            }
        };

        // ============================================
        // ONE SECOND TEMPORAL SCALES
        // ============================================
        const TemporalScales = {
            SCALES: [
                { name: "Conscious Present", duration: 1, order: 0, section: "experience" },
                { name: "Perceptual Moment", duration: 0.1, order: -1, section: "experience" },
                { name: "Neural Binding", duration: 0.025, order: -1.6, section: "neural" },
                { name: "Spike Integration", duration: 0.002, order: -2.7, section: "neural" },
                { name: "Synaptic Event", duration: 0.0005, order: -3.3, section: "neural" },
                { name: "Ion Channel", duration: 0.0001, order: -4, section: "molecular" },
                { name: "Protein Motion", duration: 1e-5, order: -5, section: "molecular" },
                { name: "Enzyme Catalysis", duration: 1e-6, order: -6, section: "molecular" },
                { name: "Side Chain", duration: 1e-8, order: -8, section: "molecular" },
                { name: "Hydrogen Bond", duration: 1e-9, order: -9, section: "atomic" },
                { name: "Molecular Vibration", duration: 1e-11, order: -11, section: "atomic" },
                { name: "Phonon", duration: 1e-12, order: -12, section: "atomic" },
                { name: "Electronic", duration: 1e-14, order: -14, section: "quantum" },
                { name: "Electron Dynamics", duration: 1e-16, order: -16, section: "quantum" },
                { name: "Attosecond", duration: 1e-18, order: -18, section: "quantum" },
                { name: "Nuclear", duration: 1e-21, order: -21, section: "fundamental" },
                { name: "Quark-Gluon", duration: 1e-24, order: -24, section: "fundamental" },
                { name: "Planck", duration: 5.39e-44, order: -43.27, section: "fundamental" }
            ],
            state: { playing: true, time: 0, omega: 1 / Math.PI, duration: 60, lastTimestamp: null },
            sigmoid(x, k) { return 1 / (1 + Math.exp(-k * (x - 0.5))); },
            gaussian(x, center, width) { return Math.exp(-Math.pow(x - center, 2) / (2 * width * width)); },
            calculateCRR(phase, omega) {
                const k = 6 / omega, coherence = this.sigmoid(phase, k), rWidth = omega * 0.08;
                const rupture = Math.max(this.gaussian(phase, 0, rWidth), this.gaussian(phase, 1, rWidth), this.gaussian(phase, 0.5, rWidth * 0.5));
                const integrationFactor = Math.exp(coherence / omega);
                let regen = phase < 0.5 ? rupture * coherence * integrationFactor * phase * 2 : rupture * coherence * integrationFactor * (1 - (phase - 0.5) * 0.5);
                return { coherence, rupture, regeneration: Math.min(1, regen) };
            },
            formatDuration(seconds) {
                if (seconds >= 1) return `${seconds.toFixed(0)} s`;
                if (seconds >= 1e-3) return `${(seconds*1e3).toFixed(0)} ms`;
                if (seconds >= 1e-6) return `${(seconds*1e6).toFixed(0)} Œºs`;
                if (seconds >= 1e-9) return `${(seconds*1e9).toFixed(0)} ns`;
                if (seconds >= 1e-12) return `${(seconds*1e12).toFixed(0)} ps`;
                if (seconds >= 1e-15) return `${(seconds*1e15).toFixed(0)} fs`;
                if (seconds >= 1e-18) return `${(seconds*1e18).toFixed(0)} as`;
                if (seconds >= 1e-21) return `${(seconds*1e21).toFixed(0)} zs`;
                if (seconds >= 1e-24) return `${(seconds*1e24).toFixed(0)} ys`;
                return `10^${Math.log10(seconds).toFixed(0)} s`;
            },
            formatCycles(duration) {
                const cycles = 1 / duration;
                if (cycles < 1000) return cycles.toFixed(0);
                if (cycles < 1e6) return (cycles/1e3).toFixed(1) + 'K';
                if (cycles < 1e9) return (cycles/1e6).toFixed(1) + 'M';
                if (cycles < 1e12) return (cycles/1e9).toFixed(1) + 'G';
                if (cycles < 1e15) return (cycles/1e12).toFixed(1) + 'T';
                if (cycles < 1e18) return (cycles/1e15).toFixed(1) + 'P';
                if (cycles < 1e21) return (cycles/1e18).toFixed(1) + 'E';
                if (cycles < 1e24) return (cycles/1e21).toFixed(1) + 'Z';
                if (cycles < 1e27) return (cycles/1e24).toFixed(1) + 'Y';
                return '10^' + Math.floor(Math.log10(cycles));
            },
            buildUI() {
                const container = document.getElementById('scalesContainer');
                if (!container) return;
                let currentSection = null;
                this.SCALES.forEach((scale, idx) => {
                    if (scale.section !== currentSection) {
                        currentSection = scale.section;
                        const divider = document.createElement('div');
                        divider.className = 'section-divider';
                        divider.innerHTML = `<div class="section-label">${currentSection}</div>`;
                        container.appendChild(divider);
                    }
                    const row = document.createElement('div');
                    row.className = 'scale-row';
                    row.id = `scale-${idx}`;
                    row.innerHTML = `<div class="scale-name">${scale.name}</div><div class="scale-duration">${this.formatDuration(scale.duration)}</div><div class="cycles-value">${this.formatCycles(scale.duration)}</div><div class="phase-bar"><div class="phase-fill" id="fill-${idx}"></div><div class="phase-marker" id="marker-${idx}"></div></div><div class="crr-value coherence" id="c-${idx}">0.00</div><div class="crr-value rupture" id="r-${idx}">0.00</div><div class="crr-value regen" id="g-${idx}">0.00</div>`;
                    container.appendChild(row);
                });
            },
            update() {
                const t = this.state.time;
                const timeValueEl = document.getElementById('temporalTimeValue');
                const timeProgressEl = document.getElementById('temporalTimeProgress');
                if (timeValueEl) timeValueEl.textContent = t.toFixed(3);
                if (timeProgressEl) timeProgressEl.style.width = `${t * 100}%`;
                this.SCALES.forEach((scale, idx) => {
                    const orderFromSecond = -scale.order;
                    let visibleCycles;
                    if (orderFromSecond <= 0) visibleCycles = 1;
                    else if (orderFromSecond <= 6) visibleCycles = Math.pow(2, orderFromSecond);
                    else visibleCycles = 64 * Math.pow(2, (orderFromSecond - 6) / 2);
                    visibleCycles = Math.min(visibleCycles, 500);
                    const phase = (t * visibleCycles) % 1;
                    const crr = this.calculateCRR(phase, this.state.omega);
                    const fill = document.getElementById(`fill-${idx}`);
                    const marker = document.getElementById(`marker-${idx}`);
                    const row = document.getElementById(`scale-${idx}`);
                    let fillColor;
                    if (crr.rupture > 0.5) fillColor = `rgba(201, 123, 99, ${0.3 + crr.rupture * 0.4})`;
                    else if (crr.coherence > 0.5) fillColor = `rgba(122, 184, 168, ${0.2 + crr.coherence * 0.3})`;
                    else fillColor = `rgba(139, 157, 195, ${0.2 + crr.regeneration * 0.3})`;
                    if (fill) { fill.style.width = `${phase * 100}%`; fill.style.background = fillColor; }
                    if (marker) marker.style.left = `${phase * 100}%`;
                    if (row) row.classList.toggle('rupture-active', crr.rupture > 0.5);
                    const cEl = document.getElementById(`c-${idx}`);
                    const rEl = document.getElementById(`r-${idx}`);
                    const gEl = document.getElementById(`g-${idx}`);
                    if (cEl) cEl.textContent = crr.coherence.toFixed(2);
                    if (rEl) rEl.textContent = crr.rupture.toFixed(2);
                    if (gEl) gEl.textContent = crr.regeneration.toFixed(2);
                });
            },
            animate(timestamp) {
                if (!this.state.lastTimestamp) this.state.lastTimestamp = timestamp;
                const delta = (timestamp - this.state.lastTimestamp) / 1000;
                this.state.lastTimestamp = timestamp;
                if (this.state.playing) { this.state.time += delta / this.state.duration; if (this.state.time >= 1) this.state.time = 0; }
                this.update();
                requestAnimationFrame((ts) => this.animate(ts));
            },
            init() {
                this.buildUI();
                const playPauseBtn = document.getElementById('temporalPlayPause');
                const resetBtn = document.getElementById('temporalReset');
                const omegaSlider = document.getElementById('temporalOmega');
                const durationSlider = document.getElementById('temporalDuration');
                if (playPauseBtn) playPauseBtn.addEventListener('click', (e) => { this.state.playing = !this.state.playing; e.target.textContent = this.state.playing ? '‚ñ∂ Play' : '‚è∏ Pause'; e.target.classList.toggle('active', this.state.playing); });
                if (resetBtn) resetBtn.addEventListener('click', () => { this.state.time = 0; });
                if (omegaSlider) omegaSlider.addEventListener('input', (e) => { this.state.omega = parseFloat(e.target.value); const display = document.getElementById('temporalOmegaValue'); if (display) display.textContent = this.state.omega.toFixed(3); });
                if (durationSlider) durationSlider.addEventListener('input', (e) => { this.state.duration = parseInt(e.target.value); const display = document.getElementById('temporalDurationValue'); if (display) display.textContent = this.state.duration + 's'; });
                requestAnimationFrame((ts) => this.animate(ts));
            }
        };

        // ============================================
        // LOGO ANIMATION
        // ============================================
        class LogoAnimation {
            constructor() { this.time = 0; this.bees = document.querySelectorAll('.logo-bee'); this.interiorBees = document.querySelectorAll('[class*="interior-bee"]'); this.animate(); }
            animate() {
                this.time += 0.02;
                this.bees.forEach((bee, i) => {
                    const angle = (i * Math.PI * 0.5) + this.time * (0.3 + i * 0.1);
                    const r = 15 + Math.sin(this.time * 0.5 + i) * 4;
                    const f8 = Math.sin(this.time * 0.4 + i * 0.6) * 6;
                    const x = 50 + Math.cos(angle) * r + f8 * Math.cos(angle * 1.5);
                    const y = 50 + Math.sin(angle) * r * 0.7 + f8 * 0.2 * Math.sin(angle * 2);
                    bee.setAttribute('transform', `translate(${x - 50}, ${y - 50})`);
                    bee.style.opacity = 0.7 + 0.3 * Math.sin(this.time * 10 + i * 2);
                });
                this.interiorBees.forEach((bee, i) => {
                    const m = Math.sin(this.time * 2 + i * 3) * 1.5;
                    const r = Math.sin(this.time * 1.5 + i * 2) * 6;
                    bee.setAttribute('transform', `translate(${m}, ${m * 0.5}) rotate(${r})`);
                });
                requestAnimationFrame(() => this.animate());
            }
        }

        // Initialize all
        document.addEventListener('DOMContentLoaded', () => {
            EntropicBrain.init();
            DiracDelta.init();
            PhysiologyViz.init();
            TemporalScales.init();
            new LogoAnimation();
        });
    </script>
</body>
</html>
